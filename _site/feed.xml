<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title></title>
    <description>Musings on spatial data, transportation, and spatial transportation data in New Zealand and beyond</description>
    <link>http://www.nearimprov.com</link>
    <atom:link href="http://www.nearimprov.com/feed.xml" rel="self" type="application/rss+xml" />
    
      <item>
        <title>Modelling traffic noise with laundered data</title>
        <description>&lt;!-- TODO summarise Nick&#39;s work --&gt;
&lt;p&gt;I had hoped to have here outputs of traffic/road noise for New Zealands major urban centres, but unfortunately my plans with a volunteering acoustic engineer have fallen through. (If you’re reading this, I’m still interested!) The engineer in question noticed my previous post on scraping data from &lt;a href=&quot;https://mobileroad.org/&quot;&gt;MobileRoad&lt;/a&gt;. He explained to me that the data has great potential for producing city-wide road noise surfaces.&lt;/p&gt;

&lt;p&gt;Noise maps on the scale of entire cities is “commonplace” in Europe, and has been performed in some Australian cities, but to their knowledge no-one has attempted to do it in New Zealand. They would be useful for everyone from planners down to indvividuals deciding where to live, and also just make neat visualisations. The software that the engineer was planning to use is called &lt;a href=&quot;http://www.soundplan.eu/english/soundplan-acoustics/&quot;&gt;SoundPLAN Acoustics&lt;/a&gt;. I don’t know much about this software or about the existence of open source equivalents. However it unfortunately works with shapefiles and doesn’t understand null data—null data has to be converted to 0.&lt;/p&gt;

&lt;p&gt;The engineer told me that State Highway traffic volume has been available for years, but only in the &lt;a href=&quot;https://www.nzta.govt.nz/assets/resources/state-highway-traffic-volumes/docs/SHTV-2010-2014.pdf&quot;&gt;form of a PDF&lt;/a&gt;. (Download from me &lt;a href=&quot;./assets/mobile-road/HTV-2010-2014.pdf&quot;&gt;here&lt;/a&gt; if that link dies.) There’s some additional information in the data in there that doesn’t seem to have percolated into MobileRoad, including the direction of a count (super important). This is now more-or-less permanently fossilised in the PDF strata. If anyone reading this would like some feedback on this data and its distribution, please reach out to me, I’d actually love to help get this data out to a wider, public audience.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;Published March 2015, and data is still being distributed from our government agencies like it&#39;s 2003.&lt;/figcaption&gt;&lt;img src=&quot;/./assets/mobile-road/pdf-fuuu.png&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;Rather interesting is the apparently increasingly widespread use of telemeters, going back as far as 2010. It would be neat to start getting at this real-time source of data for various purposes. Route planning apps would love it.&lt;/p&gt;

&lt;p&gt;Anyway, so after some back-and-forth discussion between the acoustic engineer and I, I managed to get to the bottom of my data scraping issues. The final extraction scripts, instructions, and last-scraped data is avilable for use here. The engineer did a test run on a small area of downtown Auckland. Running on a “spare computer at work”, this small area took an entire hour to compute, so an area the size of the central isthmus could take anywhere from a few days to over a week. That’s some pretty heavy calculation, but check out the result!&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;I&#39;d give credit to my unnamed acoustic engineer for this map, but he&#39;s gone below the radar of my emails for a few weeks now.&lt;/figcaption&gt;&lt;img src=&quot;/./assets/mobile-road/noise-test.png&quot; /&gt;&lt;/figure&gt;

&lt;h1 id=&quot;data--data-quality&quot;&gt;Data &amp;amp; Data Quality&lt;/h1&gt;

&lt;!-- TODO summarise Mobileroad extraction --&gt;

&lt;p&gt;In order to support this application, we need several pieces of data that one might expects from RAMM/MobileRoad: road geometry, traffic volume, road surface, speed, and the percentage of traffic classed as “heavy”. MobileRoad offers four out of five, but comes with some caveats.&lt;/p&gt;

&lt;h3 id=&quot;road-network-geometry&quot;&gt;Road network geometry&lt;/h3&gt;
&lt;p&gt;This does not need to be as fully-featured as a network dataset used for routing applications.&lt;label for=&quot;sn-id-1&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;sn-id-1&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;Although it would be great if it was easy to combine with some other national road network dataset, e.g. LINZ’s topographic network. Perhaps then you could make a pedestrian routing application that explicitly avoided busy roads. This would be a great tool for planning walking school bus routes. &lt;/span&gt; The more accurate the network geometry, the better, and topological connections are important for various kinds of analyses: just as correctly associating streams to their rivers is important for hydrological modelling. Unfortunately MobileRoad road geometries are severely limited in this regard.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;MobileRoad appears to have poor concordance with OpenStreetMap. Topologically, it&#39;s rubbish. It concerns me that we appear to be managing our nation&#39;s road assets with a dataset that is worse than what you can get for free with an open license.&lt;/figcaption&gt;&lt;img src=&quot;/./assets/mobile-road/mobileroad-topology.png&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;The attributes are associated with the road segments via a system of linear referencing. I’ve made a diagram to try to demonstrate:&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;Imagine that each of these four lines is a road in MobileRoad. Visually, they represent the road geometry. They each have attributes related to the geometry via &lt;a href=&quot;https://en.wikipedia.org/wiki/Linear_referencing&quot;&gt;linear referencing&lt;/a&gt;.&lt;/figcaption&gt;&lt;img src=&quot;/./assets/mobile-road/mobile-road-process.png&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;There are two methods to obtain the length of a line: first, from its geometry; and secondly, from its attributes. You can obtain the length from the attributes because each attribute is associated with a segment denoted by its start and end position. For example, one attribute may apply from 0 metres to 100 metres. The end position of the final attribute is therefore equal to the total length of the feature.&lt;/p&gt;

&lt;p&gt;The simplest case is a simple geometry with agreement between the two definitions of length, and only one attribute that applies to the line. This is the first line in the diagram.&lt;/p&gt;

&lt;p&gt;The second line is an attempt to show a road with two attributes that apply to different segments of the line. However it’s still a trivial case because there is agreement between the length of the line in geometrical and attribute terms.&lt;/p&gt;

&lt;p&gt;The first tricky case is the third line. Here, the red section indicates a mismatch between the lengths given in the attributes (shown in grey) and the geometry, with the “excess” geometric length shown in red. Strictly speaking, the red section of road has no data. However I think this is contrary to the “spirit” of MobileRoad, especially because the linear segments have integer values while geometric lengths are unfairly precise floating point values. Therefore, this third case is exceedingly common. My method of working around it is to scale the linear segments by determining how much larger or smaller the attribute-determined length is compared to the length determined from the feature geometry. It’s probably not perfect, but without this almost every road would have a dangling segment of no data.&lt;/p&gt;

&lt;p&gt;The final line in the above diagram represents a rather pernicious case where a &lt;code class=&quot;highlighter-rouge&quot;&gt;LINESTRING&lt;/code&gt; feature (in GIS terms) is actually a &lt;code class=&quot;highlighter-rouge&quot;&gt;MULTILINESTRING&lt;/code&gt;: that is, a &lt;em&gt;multi-part feature&lt;/em&gt;. In reality, such road geometries should be rare, but not impossible. I first noticed this in my trusty testing town of Gore. Work-arounds for this include closing small gaps, or just carrying on, ignoring the spaces. I take the latter approach, but it means my code must assume that every feature comprises an arbitrary number of simple features, rather than just working with simple &lt;code class=&quot;highlighter-rouge&quot;&gt;LINESTRING&lt;/code&gt; features throughout. I’m still not clear if my interpretation of the attributes of such geometries is the correct one.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;Follow Ardwick St along top to bottom. Notice that at the intersection of Ardwick and Crewe Streets, there is a slight break in the geometry. However both ends of Ardwick Street are actually the same feature, and share attributes. What should happen if the break occurs at the 50th metre, but an attribute nominally spans metres 0–75? Is the space included? How can it be?&lt;/figcaption&gt;&lt;img src=&quot;/./assets/mobile-road/gore-line.png&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;Finally, there are also some hilariously incorrect geometries that have wormed their way into MobileRoad.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;Like this enormous pier in the Firth of Thames.&lt;/figcaption&gt;&lt;img src=&quot;/./assets/mobile-road/thames.png&quot; /&gt;&lt;/figure&gt;

&lt;h3 id=&quot;traffic-volume&quot;&gt;Traffic volume&lt;/h3&gt;
&lt;p&gt;This is the primary product of MobileRoad, and almost every road has a count.&lt;/p&gt;

&lt;p&gt;An important caveat that I will return to is that the count associated with road has a particular date associated with it. I actually really love this, as it is quite an important piece of information. Most similar kinds of data that I have worked with often only have a single creation or last-updated date associated with the entire dataset. Clearly data is collected over time. That the actual date is stated even supports the investigation into the cause of any outliers. Well done MobileRoad.&lt;/p&gt;

&lt;p&gt;Although this is ostensibly the primary reason for the existence of MobileRoad, I have some serious reservations with the traffic volume data. For example, I would assume that if you proceed down a street that only leads to culs-de-sac, that the volumes on each of the “leaves” would approximately sum to the single entry point, just as the water contained in a river is a strict function of the water in its tributaries (in the majority of cases). If you thought this, you would be wrong. I want to know why my intuition is wrong. I want to know whether the data is wrong. Part of the issue may be mismatching timestamps, with different segments’ attributes relating to different measurement dates. However this didn’t hold on the handful of test cases I inspected.&lt;/p&gt;

&lt;p&gt;On occasion, volume estimates for the same road are inconsistent, even where there is no apparent reason for this inconsistency to exist. An example is a traffic estimate that only exists for half of a road that has no intersections. There is some attrition along the length of a road as people turn in and out of driveways, but that happens on every road, yet only some seem to possibly be accounting for it.&lt;/p&gt;

&lt;h3 id=&quot;heavy-traffic&quot;&gt;Heavy traffic&lt;/h3&gt;

&lt;p&gt;Heavy traffic is expressed as a percentage of traffic volume within mobile road, although this is rounded to an integer value for some reason, possibly because the identification of heavy vehicles might be a bit uncertain. Showing heavy vehicle volumes on a map results in some interesting patterns, including the identification of arterials for heavy vehicles, industrial areas, and new housing subdivisions (where apparently there are lots of trucks and limited through-traffic). In Christchuch the red zone is also obvious. This is one reason I’d really like a more complete time-series component to this data, to see how geographic patterns of industrial traffic are changing.&lt;/p&gt;

&lt;h3 id=&quot;road-surface&quot;&gt;Road surface&lt;/h3&gt;
&lt;p&gt;Road surface information is an important input into noise modelling. If you’ve spent time walking alongside arterial roads when cars are moving at full speed, you might’ve noticed the difference the road seal can make to vehicle noise.&lt;/p&gt;

&lt;p&gt;I walk to work most mornings, and have to turn up my podcast when I walk next to a chipseal road, but I can quite comfortably listen at a low volume when walking along the nice section of smooth asphalt. Beyond this, I don’t really know much about the different types of road seal nor their implications. Unfortunately MobileRoad doesn’t give me an opportunity to learn more, because there is no metadata associated with the road seal information. I trust that someone must know what &lt;code class=&quot;highlighter-rouge&quot;&gt;AC Reseal 05/2013 Grade 15 width 9.80m&lt;/code&gt; (a section of Adelaide Road, Wellington) or &lt;code class=&quot;highlighter-rouge&quot;&gt;RACK Reseal 04/2004 Grade 4/6 with 7.40m&lt;/code&gt; (Walters Street, Lower Hutt) really mean.&lt;/p&gt;

&lt;p&gt;One difficulty working with these string representations of widths is that although ~90% of the roads follow what looks to be a consistent pattern, not all follow the same rules. In particular, the standard used by the State Highways is considerably different from district data. The only real work my parsing code does is read these strings into objects with properties, &lt;em&gt;while gracefully handling corner cases&lt;/em&gt;. If this were a real API, we could perhaps be dealing in named JSON properties. But alas: parsing a road width string works like this:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;re&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_seal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;d?&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;w+)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s{1}(.*)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;d{0,2})&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/?(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;d{2})&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;d{4})&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;sGrade&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s([&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/]*)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;swidth&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s([&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;d|.]*)m&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# Maybe write to an error log&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;seal&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;coating&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&#39;not applicable&#39;&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;seal_date&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&#39;{y}-{m}-{d}&#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;seal_grade&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;seal_width&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;seal_display&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;One example of a slightly crummy input is &lt;code class=&quot;highlighter-rouge&quot;&gt;INBLK Not applicable 02/2000 Grade 12 width 8.00m&lt;/code&gt;. The code has to search for the string “not applicable” and cast that to an actual null value. My testing code literally consists of one example that covers most cases, and then all of the corner cases I found when parsing. Maybe a few slipped through my regex fingers. They probably did. I would like to be more confident than that. Sharp readers may notice that the moment non-metre units are used, things fall to shit.&lt;/p&gt;

&lt;p&gt;I shouldn’t have to do this. This pattern in open (well, &lt;em&gt;semi-open&lt;/em&gt;) data occurs too frequently. The MobileRoad application should be composing those strings in the client from objects that have named properties. Then my code wouldn’t exist. As a programmer, I like not writing code.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Maybe one day.&lt;/p&gt;

&lt;h3 id=&quot;whats-missing&quot;&gt;What’s missing?&lt;/h3&gt;

&lt;p&gt;&lt;label for=&quot;mn-id-1&quot; class=&quot;margin-toggle&quot;&gt; ⊕&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;mn-id-1&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;marginnote&quot;&gt;I recently asked my local council for data from a traffic count that occurred about 150 metres from my house. I was primarily interested in the speed information. My house abuts a 100 km/h speed sign marking the beginning of State Highway 23, so I wanted to know what speed people were doing 150m from the sign. I assumed lots of people would still be decelerating at this point, and that others travelling in the oppsite direction would be prematurely accelerating. My hunch was right: the &lt;em&gt;median&lt;/em&gt; speed at the monitoring point was 55 km/h—and it’s right by a pedestrian refuge where I watch kids scooter to school in the morning. &lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Speed limits&lt;/strong&gt; and measurements of actual &lt;strong&gt;vehicle speed&lt;/strong&gt; are not included in MobileRoad. Speed limits can be sourced from other official (LINZ) and unofficial (OSM, Google Maps, etc.) sources although getting a perfect match is difficult, and getting an automated estimate of any mismatch error is a hard problem.&lt;/p&gt;

&lt;p&gt;The absence of speed information is a bit glaring because speed limits do not seem difficult to include given everything else that’s being achieved, and as far as I know (which isn’t far) vehicle speeds are also recorded when a traffic count is performed. I really don’t have a good explanation for the absence of speed data. Except a cynical one that would show just how often drivers exceed speed limits.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;Because of the profile of this what-I-call &quot;speed-death curve&quot;, slight reductions in speed can massively improve the outcomes of crashes for pedestrians. Speed on the horizontal axis is in miles per hour. &lt;a href=&quot;https://www.propublica.org/article/unsafe-at-many-speeds&quot;&gt;Interactive version&lt;/a&gt;. It would be great to have access to speed data at a single source; and it would be good to level the playing field in terms of the data accessible to councils/council contractors and interested individuals, community groups and lobbyists.&lt;/figcaption&gt;&lt;img src=&quot;/./assets/mobile-road/propublica-speed.png&quot; /&gt;&lt;/figure&gt;

&lt;h3 id=&quot;other-issues&quot;&gt;Other issues&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Replication and conflicting information&lt;/strong&gt;. Because MobileRoad data is divided up by district council, and the state highways by major island, there is some replication across the authorities supplying data. This seems to most often occur at the boundary between districts, and with state highways. The state highway outside my house is included twice: once in the North Island State Highway set, and once in my district council set. They have conflicting information about the traffic volumes, as well as inconsistent geometries. There are surely other examples, but I currently have no automated method to discover these.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Change over time&lt;/strong&gt;. New counts entirely supplant old counts, so we have no idea if the volume on a particular road is changing over time, or its sampling variability. Counts are not done on weekends (I believe) which also limits the applications of the data, and may understate the maximum volume of many roads (e.g. counts on roads near suburban rugby fields are conceivably going to be understated.) I have the ability, but am searching for the time, to download the data on a regular schedule and develop &lt;a href=&quot;https://en.wikipedia.org/wiki/Diff_utility&quot;&gt;diffs&lt;/a&gt; that will firstly allow incremental changes to be detected and recorded, and secondly allow time-series analysis, or at least allow some form of analysis that is explicit with its model time. You wouldn’t make a weather forecast with model inputs from different points in time. Why should your traffic model be different?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Building footprints&lt;/strong&gt;. Buildings reflect and refract noise in three dimensions. In New Zealand we have one experimental building footprint geographic data service, which is a great start, but to add some true realism we need to get into the real third dimension. I can’t imagine that this data is freely available, so I haven’t really considered it here.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Gradient&lt;/strong&gt;. Topography is another issue I’ve glossed over here as it’s a little incidental to MobileRoad. Vehicles make more noise going uphill as the engines have to work harder. Apparently this more than outweighs the noise reduction from cars working less hard to go downhill. Trucks probably make more noise going downhill, due to engine braking. Just getting a digital elevation model isn’t quite adequate though, because bridges and tunnels are not at all well-represented by most general-prupose DEMs. You can see this quite obviously in this second map made by the acoustic engineer:&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;Motorway bidges to the northeast of the Wellington CBD are being modelled as roads on sharp hillsides, when in reality they aren&#39;t quite as steep as that would suggest. (They are pretty damn strep though.)&lt;/figcaption&gt;&lt;img src=&quot;/./assets/mobile-road/noise-test2.png&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;Because the algorithm used by the acoustic modelling software is known to be unreliable for roads with less than 2000 AADT, such roads were excluded from the above analysis. Roads with fewer vehicles than that are rather quiet in any case.&lt;/p&gt;

&lt;h1 id=&quot;finally&quot;&gt;Finally&lt;/h1&gt;

&lt;h3 id=&quot;what-can-this-data-be-used-for&quot;&gt;What can this data be used for?&lt;/h3&gt;

&lt;p&gt;You can use MobileRoad data for quite a few applications, but I implore you to keep the caveats I’ve discussed in mind, and to also critically assess other forms of data you might need for your analysis, especially elevation models. Tunnels are pretty good at absorbing and funnelling noise, but DEMs are entirely incapable of modelling them.&lt;/p&gt;

&lt;h3 id=&quot;who-is-using-it&quot;&gt;Who is using it?&lt;/h3&gt;

&lt;p&gt;Apparently not a lot of people, if an acoustic engineer didn’t already have their hands on it outside of a project basis.&lt;/p&gt;

&lt;h3 id=&quot;is-it-fit-for-purpose&quot;&gt;Is it fit for purpose?&lt;/h3&gt;

&lt;p&gt;Frankly, no, not until there is a lot more metadata, and there is a promise not to change the data model so that the data remains consumable by any downstream applications. But, it’s a immesurably better than a PDF. So for any custodians of this data: please take what you have as a headstart, and get this data published properly, so New Zealand can benefit from it.&lt;/p&gt;

&lt;h3 id=&quot;what-decisions-are-being-made-on-the-basis-of-it&quot;&gt;What decisions are being made on the basis of it?&lt;/h3&gt;

&lt;p&gt;I don’t really know! But I hope they are aware of the limitations, and aren’t planning to spend billions of tax payer dollars on the information without assessing it critically…&lt;/p&gt;

&lt;h3 id=&quot;how-can-it-be-improved&quot;&gt;How can it be improved?&lt;/h3&gt;

&lt;p&gt;Open it up. People using the data will notice irregularities, and can report back.&lt;/p&gt;

&lt;h1 id=&quot;footnote&quot;&gt;Footnote&lt;/h1&gt;

&lt;p&gt;The term &lt;strong&gt;“data laundering”&lt;/strong&gt; is one I’ve seen used second-hand, apparently coined by Keith Ng at OS//OS NZ, 2016. It refers to scraping someone else’s data and republishing it. That’s a pretty apt term for what you’ve just heard about.&lt;/p&gt;
</description>
        <pubDate>Thu, 01 Sep 2016 21:48:00 +1200</pubDate>
        <link>http://www.nearimprov.com//laundering-noise/</link>
        <guid isPermaLink="true">http://www.nearimprov.com//laundering-noise/</guid>
      </item>
    
      <item>
        <title>Mobile Road: Valuable Data Hiding in Plain Sight</title>
        <description>&lt;p&gt;I’ve spent a lot of time recently testing the waters of open transport data in New Zealand. The summary is that there is actually quite a lot of data available, but it’s not easy to find, it’s not readily interoperable, it’s heavily coupled to the NZTA’s own applications, and generally there are severe uncertainties about the rights to use some of it.&lt;/p&gt;

&lt;p&gt;A dataset that proves all these points is the NZTA’s data on annual average daily traffic (AADT), and the percentage of this figure that represents heavy traffic.&lt;/p&gt;

&lt;p&gt;I didn’t realise this data was available. Judging by reactions on Twitter and Facebook, I certainly wasn’t the only one.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;en&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;New Zealand state highway system by average daily volume &lt;a href=&quot;https://t.co/PL0rpvyHOa&quot;&gt;pic.twitter.com/PL0rpvyHOa&lt;/a&gt;&lt;/p&gt;&amp;mdash; ∆ Richard Law (@alphabeta_soup) &lt;a href=&quot;https://twitter.com/alphabeta_soup/status/731813068888363008&quot;&gt;May 15, 2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;p&gt;I don’t know a lot about how this data is collected, who collects, or even who ultimately uses it. It has been suggested that this data is RAMM AADTs. From what I understand, the commercial &lt;a href=&quot;http://www.ramm.com/&quot;&gt;Road Assessment and Maintenance Management (RAMM) software&lt;/a&gt; is used by Road Controlling Authorities (RCAs) in New Zealand, their consultants and contractors, and by the NZTA in the management of the State Highway network. RAMM offers some APIs, including a Web Feature Service for easy consumption by both web and desktop GIS—although this has some costs according to the 2014 documentation available on the RAMM website. Their documentation can be found &lt;a href=&quot;https://apps.ramm.co.nz/rammapi6.1/documentation/index&quot;&gt;here&lt;/a&gt;, and it looks wonderful… if you are an RCA and actually have access to it.&lt;/p&gt;

&lt;p&gt;I’m not convinced that there are good reasons why most of this data isn’t public by default. Fortunately, a small portion of it is now available to download &lt;a href=&quot;https://github.com/alpha-beta-soup/mobile-road-extraction&quot;&gt;from my repository&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;hiding-in-plain-sight&quot;&gt;Hiding in plain Sight&lt;/h1&gt;

&lt;p&gt;I came across the &lt;a href=&quot;https://mobileroad.org/index.html&quot;&gt;Mobile Road&lt;/a&gt; website last week after a presentation I saw at WaiGIS, a meeting of people working in GIS within the Waikato region. The presenter has been using Mobile Road freely to obtain current road volume and surfacing information when working on noise mitigation at individual sites. It’s currently a rather strange, possibly beta website primarily intended for mobile and offline use. I can’t criticise the website a great deal because I’m not exactly a wonderful front-end developer; but it is objectively difficult to use, and appears very bizarre on a non-mobile device. Documentation for Mobile Road can be found &lt;a href=&quot;https://wiki.mobileroad.org/&quot;&gt;here&lt;/a&gt;. According to that documentaiton, Mobile Road is a “free and collaborative” app for the roading industry hosted at Auckland Motorways.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Most people use the app to identify route positions, capture notes whilst on site or use it as an auditing tool to check RAMM data.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I spent some time inspecting the requests made when using the Mobile Road application, and noticed that it first makes a request to download a metadata document providing links to further JSON files that include road centreline geometries, AADTs and other information (including road surface and the percentage of the traffic that is heavy). Given that this is not an official API, there is almost no documentation about this data, aside from what I can surmise from how Mobile Road uses the information.&lt;/p&gt;

&lt;p&gt;The geometries are in New Zealand Transverse Mercator and are specified with &lt;a href=&quot;https://en.wikipedia.org/wiki/Delta_encoding&quot;&gt;delta encoding&lt;/a&gt;, which means they’re a little special. The structure of the JSON data is also rather complicated, with a &lt;code class=&quot;highlighter-rouge&quot;&gt;centrelines&lt;/code&gt; object containing more than just centrelines, and it being associated with another array that unfortunately often has a different length. I have made what I think is a correct transformation of the information into GeoJSON, so feel free to just download the files from my &lt;a href=&quot;https://github.com/alpha-beta-soup/mobile-road-extraction&quot;&gt;repository&lt;/a&gt;, or clone it see if I have made any mistakes.&lt;/p&gt;

&lt;p&gt;If you want to re-download the data (perhaps to get updated counts), there are instructions in the repository.&lt;/p&gt;

&lt;h1 id=&quot;what-is-it-good-for&quot;&gt;What is it good for?&lt;/h1&gt;

&lt;p&gt;Some noted that this data is incredibly valuable for a range of applications, particularly in research. In my own case, a year or so ago when I worked as a Research Assistant at the New Zealand Institute for the Study of Competition and Regulation, we could have used this data to improve our regional models of transportation and residential choices. As it stood, the driving mode was the least-well developed, and sufferred particularly from missing estimates of congestion and driver route preference.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;en&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;&lt;a href=&quot;https://twitter.com/alphabeta_soup&quot;&gt;@alphabeta_soup&lt;/a&gt; &lt;a href=&quot;https://twitter.com/dflydsci&quot;&gt;@dflydsci&lt;/a&gt; that would have been awesome for my research on human mediated dispersal. Nice work.&lt;/p&gt;&amp;mdash; jp (@ferrouswheel) &lt;a href=&quot;https://twitter.com/ferrouswheel/status/732095184763125761&quot;&gt;May 16, 2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;//platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;p&gt;Others (including those in industry) have said that they have been able to attend this data at a State Highway level (via enail request), but not at a local level.&lt;/p&gt;

&lt;h1 id=&quot;are-we-allowed-to-use-it&quot;&gt;Are we allowed to use it?&lt;/h1&gt;

&lt;p&gt;I really have no idea. There is nothing on the Mobile Road website specifiying who the data ultimately belongs to, or who is allowed to use it. I figure that given it is provided by a public agency with no usage agreement, because it is downloaded onto your device when you use the application, and because it requires no authentication or credentials, then it is fair and reasonable to assume it is in the public domain. I possibly now have a track record of being a little cavalier with respect to taking publicly-accessible transport data and putting it out to a wider audience, but I will respect explicit boundaries when they are stated. In this case, they are absent.&lt;/p&gt;

&lt;p&gt;It has been suggested to me that the RAMM data (the traffic counts) is owned by RCAs and is not intended for public use. The same person suggests that the centreline data might be proprietary, possibly CoreLogic’s or Critchlow’s. The first point is probably true, but I don’t think the second one is true. Even if the centreline geometries are proprietary, it’s worth noting that it’s not especially realistic data, with poor precision, notable absences of new subdivisions, abundant topological errors, and no information necessary for forming a road network (e.g. oneway restrictions). You can get better road centreline data for free, both from OpenStreetMap and LINZ. In fact I think as it stands the geometry is barely fit for the purpose I intend for it (matching it to crash locations as normalisation for calculating crash rates).&lt;/p&gt;

&lt;p&gt;To the extent that RAMM traffic counts aren’t public information by default, I think it’s worth recalling my own experience requesting some of that data. After a traffic count was performed near my house, I emailed the Waikato District Council asking for the data. I recieved a detailed tabular breakdown of everything that was collected; including the distribution of traffic speeds in hourly bins. Having a single AADT per road segment actually pales in comparison to that level of detail.&lt;/p&gt;

&lt;h1 id=&quot;how-could-it-be-better&quot;&gt;How could it be better?&lt;/h1&gt;

&lt;p&gt;This data, while impressive and surprising in its scope, still is not fit for a variety of purposes. Mostly this is because I have no real idea how AADTs are determined, and simply can’t rely on them.&lt;/p&gt;

&lt;p&gt;Perhaps the NZTA could take this opportunity to note that lots of people are excited about using this data. It has no privacy implications. It is already public. It already has a system in place to keep it current. Take the opportunity to make this official! Publish some documentation, advertise an API endpoint, and encourage peple to actually use it. All the key pieces are already in place.&lt;/p&gt;

&lt;p&gt;Good reading: &lt;a href=&quot;http://opendatahandbook.org/&quot;&gt;the Open Data Handbook&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;some-samples&quot;&gt;Some samples&lt;/h1&gt;

&lt;p&gt;The following maps show heavy vehicle AADT, as both an absolute number of heavy vehicles, and as a percentage of the total AADT. The upper class in the latter case is ≥10%. I attempted to also include Dunedin and Tauranga, but the data for them seems rather erroneous. In the case of Tauranga, my script is unable to identify the percentage of heavy vehicles (data schema issue?), and in the case of Dunedin it seemed very suspicious that there were few identifiable patterns (measurement error?).&lt;/p&gt;

&lt;p&gt;Still, I find it interesting that the industrial districts of our major cities are so readily apparent with this data. With a bit of official support and eyes on the data we could perhaps get the quality and metadata issues sorted and start benefiting from people’s effort. I should probably make a legend (or an interactive) so you can decode the values better, but for now, red represents more heavy vehicles, and blue represents the category with the fewest heavy vehicles.&lt;/p&gt;

&lt;h2 id=&quot;auckland&quot;&gt;Auckland&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/mobile-road/auck-perc.png&quot; /&gt;&lt;figcaption&gt;Percentage of AADT that is heavy. The clear boundaries of former councils is awfully suspicious.&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/mobile-road/auck-vol.png&quot; /&gt;&lt;figcaption&gt;Absolute heavy AADT&lt;/figcaption&gt;&lt;/figure&gt;

&lt;h2 id=&quot;wellington&quot;&gt;Wellington&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/mobile-road/wgtn-perc.png&quot; /&gt;&lt;figcaption&gt;Percentage of AADT that is heavy&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/mobile-road/wgtn-vol.png&quot; /&gt;&lt;figcaption&gt;Absolute heavy AADT&lt;/figcaption&gt;&lt;/figure&gt;

&lt;h2 id=&quot;christchurch&quot;&gt;Christchurch&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/mobile-road/chch-perc.png&quot; /&gt;&lt;figcaption&gt;Percentage of AADT that is heavy&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/mobile-road/chch-vol.png&quot; /&gt;&lt;figcaption&gt;Absolute heavy AADT&lt;/figcaption&gt;&lt;/figure&gt;
</description>
        <pubDate>Wed, 18 May 2016 18:00:00 +1200</pubDate>
        <link>http://www.nearimprov.com//mobile-road/</link>
        <guid isPermaLink="true">http://www.nearimprov.com//mobile-road/</guid>
      </item>
    
      <item>
        <title>Crash Analysis System: Aggregation Wizardry</title>
        <description>&lt;p&gt;&lt;em&gt;This is a follow-up post to my previous entry, &lt;a href=&quot;www.nearimprov.com/cas-saga&quot;&gt;“Crash Analysis System: The Narrative Arc”&lt;/a&gt;, in which I describe my on-going dispute with the NZTA about access to a comprehensive record of road-accident data for New Zealand.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Since my last post I’ve had a number of people come forward and demystify aspects of the NZTA’s Crash Analysis System (CAS) that I did not fully appreciate. The NZTA has also come up with the aggregated data I’ve been waiting on for several months. In this post I’ll take you through this new public method of accessing CAS-the-data, and also highlight some of the aspects of CAS that I’ve learned since my last post. The TL;DR is that the aggregation is everything we knew it would be: a shotgun to the balls. There’s no upside to it.&lt;/p&gt;

&lt;p&gt;In my last post I included a sample disaggregate CAS record, of a crash in Ashburton. Here it is again:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;csv
&#39;Ashburton District&#39;,&#39;MOORE ST&#39;,&#39;100&#39;,&#39;N&#39;,&#39; &#39;,&#39;WILLIAM ST&#39;,&#39;201531749&#39;,&#39;07/02/2015&#39;,&#39;Sat&#39;,&#39;2335&#39;,&#39;EA&#39;,&#39;CN1V&#39;,&#39;103A 129A &#39;,&#39;M&#39;,&#39;R&#39;,&#39;D&#39;,&#39;DO&#39;,&#39;F &#39;,&#39; &#39;,&#39; &#39;,&#39;C&#39;,&#39;050&#39;,&#39;0&#39;,&#39;0&#39;,&#39;0&#39;,&#39;&#39;,&#39;&#39;,&#39;1499510&#39;,&#39;5137544&#39;,
&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Decoded, it might look like this:&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;img src=&quot;/./assets/cas-saga/asburton-example.png&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;Now that the NZTA has &lt;a href=&quot;http://www.nzta.govt.nz/resources/crash-analysis-reports/grouped-crash-sites/&quot;&gt;released aggregate data&lt;/a&gt;, we can compare and contrast the so-called “grouped crash sites”:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;csv
201212510,1822862,5530978,I,4,,0,Palmerston North,RUAHINE ST,FEATHERSTON ST,50
&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;There’s a lot less there, but initially it’s actually harder to decode this information, because the NZTA has apparently also taken this opportunity to change how they classify crashes.&lt;label for=&quot;sn-id-1&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;sn-id-1&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;From January 2016 CAS now uses v4.0 of the &lt;a href=&quot;http://www.nzta.govt.nz/assets/resources/guide-to-coded-crash-reports/docs/Factors-contributing-to-crashes-for-use.pdf&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;guide-to-coded-crash-reports&lt;/code&gt;&lt;/a&gt;. In case NZTA moves or removes it, download it from me &lt;a href=&quot;/assets/cas-saga/guide-to-coded-crash-reports_v4.0.pdf&quot;&gt;here&lt;/a&gt;. I just hope it’s possible to download the older data in this same schema. &lt;/span&gt; The NZTA explains&lt;label for=&quot;sn-id-2&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;sn-id-2&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;A diff PDF can be obtained from the NZTA &lt;a href=&quot;http://www.nzta.govt.nz/assets/resources/guide-to-coded-crash-reports/docs/New-retired-merged-contributory-factors-for-use-from-1-Jan-2016.pdf&quot;&gt;here&lt;/a&gt;, and from me &lt;a href=&quot;/assets/cas-saga/cas-diff.pdf`&quot;&gt;here&lt;/a&gt;. The changes largely look fine, and they have included conversions between lots of codes they have changed. An interesting new inclusion is &lt;strong&gt;697: Vehicle software failure&lt;/strong&gt;, but I’m not sure what &lt;strong&gt;856: Barriers necessary&lt;/strong&gt; and &lt;strong&gt;857: Island necessary&lt;/strong&gt; are—they sound like policy, not explanations of an accident. Still, props to the NZTA for the semantic versioning, my only real quibble is that a PDF has to be the most annoying format for communicating a table of data. I’ll get around to making a machine-readable format of this in the near future and it will be included in my CAS repository. At that time I’ll also write CAS v4.0 versions of the original data, going back to the year 2000. &lt;/span&gt; that&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Minor changes to some contributory factor codes were made in March [2016]. As mentioned in previous messages, a few new codes have been added, a few have been retired and some have merged into other codes. Where codes have been merged, historical crashes containing merged codes have been updated to reflect that.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;However none of the raw data is available without signing a license agreement. Looking at that aggregated record I included above, there is no crash code at all. Here’s what we get in the aggregate format:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;
Grouped Site ID: Unique identifier of the crash site
&lt;br /&gt;&lt;br /&gt;
Grouped Site Easting: Coordinates of the crash site - NZ Transverse Mercator 2000 easting
&lt;br /&gt;&lt;br /&gt;
Grouped Site Northing: Coordinates of the crash site - NZ Transverse Mercator 2000 northing
&lt;br /&gt;&lt;br /&gt;
Grouped Site Type: Site type - I (intersection), blank (other)
&lt;br /&gt;&lt;br /&gt;
Site Crash Count: Number of crashes at this site
&lt;br /&gt;&lt;br /&gt;
Site Location Direction: The direction of the crash from the reference point. Values N, E, S, W
&lt;br /&gt;&lt;br /&gt;
Site Location Distance: The distance of the crash from the reference point for the crash (often the intersection of &#39;Crash Road&#39; and &#39;Side Road&#39;)
&lt;br /&gt;&lt;br /&gt;
Territorial Local Authority: Territorial local authority where the crash occurred
&lt;br /&gt;&lt;br /&gt;
Crash Road: Part one of the crash location. May be a road name, state hIghway route position, landmark, or other
&lt;br /&gt;&lt;br /&gt;
Side Road: Part 2 of the crash location. May be a side road name, landmark etc
&lt;br /&gt;&lt;br /&gt;
Speed Limit: The speed limit in force at the crash site at the time of the crash
&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;We see that in the metadata “crash” is used in the singular, when the whole point of the aggregate data is that we cannot be trusted with individual accidents any longer.&lt;/p&gt;

&lt;p&gt;By eyeballing this record I can tell you that four injury-causing (or fatal) accidents have happened at this one site in Palmerston North, within 30m of the intersection of Ruahine Street and Featherston Street, at some point in the period from 1 July 2012 to 30 June 2015.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;That’s literally all I can tell you.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I can’t tell you what modes of transport were involved (car, truck, cyclist?). The speed limit says 50 km/h, but does that actually apply to both streets? From the metadata I can tell you that these must only include accidents with minor injuries or worse, but I can’t even say whether or not someone has died here, or how. I don’t even know when these crashes happened, or when the first and last crashes in the group occurred. The “Grouped Site ID” looks suspiciously like a date (201212510 → December 2012?), but I’m just guessing and there’s no way they all happened at once so even if it was a date it would be almost useless for many types of analytical question. Did they happen at night? At the weekend? Was someone drunk in one or all of these crashes? Hell, maybe I’m just going to start making shit up since we have no other real option.&lt;/p&gt;

&lt;p&gt;A large proportion of the original data was no-injury crashes, which now are completely absent, not even present in aggregate. These are almost certainly under-represented in CAS… but what kind of response is this? Accidents that are under-represented are not really candidates for redaction.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;A disclaimer that comes with the aggregate data, inside the spreadsheet. Note that I can&#39;t even open the original .xlsx on my computer due to (I assume) the gross formatting the NZTA has thrown into the spreadsheet; LibreOffice Calc complains that the file has been corrupted. I agree.&lt;/figcaption&gt;&lt;img src=&quot;/./assets/cas-saga/meta.png&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;To top it off, the CAS data is still late: following the old CAS data schedule, we’d have disaggregate data up to December 2015 by now, rather than just June 2015: so we’re six months late and severely short-changed.&lt;/p&gt;

&lt;p&gt;I wouldn’t be so mad about this if I didn’t know the NZTA collects better information than this, but they do. Apparently the public just can’t be trusted with it. We’ve even progressed down Randall’s file-extension-trustworthiness-index, from the heights of a &lt;code class=&quot;highlighter-rouge&quot;&gt;.csv&lt;/code&gt;:&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;http://imgs.xkcd.com/comics/file_extensions.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;Actually, we’ve gone even further back (in time). I found reference to another Microsoft Excel application last week. Inside there is &lt;a href=&quot;https://www.nzta.govt.nz/resources/road-safety-wizard/&quot;&gt;a magic wizard&lt;/a&gt;.&lt;label for=&quot;mf-id-wizard&quot; class=&quot;margin-toggle&quot;&gt;⊕&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;mf-id-wizard&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;marginnote&quot;&gt;&lt;img class=&quot;fullwidth&quot; src=&quot;/./assets/cas-saga/wizard.gif&quot; /&gt;&lt;br /&gt;Greetings from the Computer Wizard… in all seriousness, this is probably a good thing for some people. But I hardly think it’s controversial to suggest that in 2016 we can easily make tools at least twice as good as an Excel Macro Wizard.&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;This seems to somehow make a connection to the NZTA’s servers to download five years of CAS data on demand, and can tell you about the crash factors, road type, lightning, and weather conditions. I’d tell you more, but I can’t actually use the Wizard because I don’t have Microsoft Office. I said this last time but it’s worth repeating with emphasis: &lt;strong&gt;if you require people to have licenses for proprietary software to access open data, the data is not open.&lt;/strong&gt; It’s 2016, we ought to be making web applications, not spreadsheet wizards.&lt;/p&gt;

&lt;p&gt;You can take a gander at the wizard in this PDF from the NZTA &lt;a href=&quot;https://www.nzta.govt.nz/assets/userfiles/transport-data/safety-suburb-help.pdf&quot;&gt;here&lt;/a&gt;, and from me &lt;a href=&quot;/assets/cas-saga/safety-suburb-help&quot;&gt;here&lt;/a&gt;. It’s worth noting that even this tool is severely limited: you can only filter on four crash factors: alcohol, overtaking, speed, and fatigue (I don’t know exactly which factor codes are included, or how). In addition, you can only see down to a suburb level, so the aggregation here is even more severe.&lt;/p&gt;

&lt;h1 id=&quot;other-things-ive-learnt-about-cas&quot;&gt;Other things I’ve learnt about CAS&lt;/h1&gt;

&lt;p&gt;According to the Way Back Machine, the NZTA has published the original CSV data (or something like it) since at least 2006. Glen Koorey mentioned in a comment on the first post that CAS-the-system is about 15 years old, which marries with how much data used to be available for download without signing a license agreement. I learnt a little about Citrix, and apparently there are non-Windows clients that will enable interested parties to explore CAS via NZTA’s interface. Personally I’m still not into that: my problem is that I want to create my own data exploration tool for CAS. &lt;strong&gt;CAS was never intended for general public consumption; I want to make it so it is.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Glen also mentioned that a CAS upgrading program has been underway for a few years. One can get on the mailing list for this at &lt;a href=&quot;&amp;#109;&amp;#097;&amp;#105;&amp;#108;&amp;#116;&amp;#111;:&amp;#099;&amp;#097;&amp;#115;&amp;#114;&amp;#101;&amp;#112;&amp;#108;&amp;#097;&amp;#099;&amp;#101;&amp;#109;&amp;#101;&amp;#110;&amp;#116;&amp;#064;&amp;#110;&amp;#122;&amp;#116;&amp;#097;&amp;#046;&amp;#103;&amp;#111;&amp;#118;&amp;#116;&amp;#046;&amp;#110;&amp;#122;&quot;&gt;&amp;#099;&amp;#097;&amp;#115;&amp;#114;&amp;#101;&amp;#112;&amp;#108;&amp;#097;&amp;#099;&amp;#101;&amp;#109;&amp;#101;&amp;#110;&amp;#116;&amp;#064;&amp;#110;&amp;#122;&amp;#116;&amp;#097;&amp;#046;&amp;#103;&amp;#111;&amp;#118;&amp;#116;&amp;#046;&amp;#110;&amp;#122;&lt;/a&gt;. Frankly it’s hard to see much fruit.&lt;/p&gt;

&lt;p&gt;The other &lt;em&gt;very interesting tidbit&lt;/em&gt; that I discovered from one my readers is that the CAS interface (the one you get via Citrix after signing the license agreement) actually &lt;em&gt;allows you to download the disaggregate information in the exact same schema as the original CSVs&lt;/em&gt;. For a higher fee, super-users can actually see super-disaggregate data that surely has some serious privacy considerations: records include names, addresses, Police sketches, Police comments, etc.&lt;/p&gt;

&lt;p&gt;Apparently not just anyone can get a license to CAS (you need to justify why you need access),&lt;label for=&quot;sn-id-5&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;sn-id-5&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;Although I’ve been offered it twice without giving a specic road-safety justification.  &lt;/span&gt; and (I hope) not just anyone in that subset can access the information that is actually sensitive. A basic CAS license costs $500 per year.&lt;label for=&quot;sn-id-6&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;sn-id-6&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;Though it’s very likely that it no longer costs anything—I have recieved conflicting information on this matter. &lt;/span&gt; The extended license costs up to $3000 a year.&lt;label for=&quot;sn-id-4&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;sn-id-4&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;Disclaimer: not an official source of information. &lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&quot;heres-some-raw-data&quot;&gt;Here’s some raw data…&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;…since the NZTA isn’t exactly giving it away like candy&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;To prove the utter pointlessness of the NZTA’s licensing system for access to (basic) CAS data: &lt;a href=&quot;/assets/cas-saga/all-crashes-nz-2015.csv&quot;&gt;here’s the disaggregate data that I’ve been wanting all year, as a CSV&lt;/a&gt;. Note that this uses the new, v4.0 crash factor codes, so it’s not as easy  to ingest. It does overlap the first-quarter 2015 data I already have available on Github, so you can do a diff easily. When I get some time, I’ll update my original web application so you can explore this data at your leisure: it will be the only way you can explore the disaggregate data without NZTA pre-approval!&lt;/p&gt;

&lt;p&gt;I suppose there’s a mild ethical issue at stake here: strictly speaking I know I shouldn’t be disemminating this data. But I haven’t actually signed anything to say I can’t. I recieved this information from a third party who I won’t ever reveal. But the fact that I did get my hands on it is pretty indicative of how pointless NZTA’s restrictions are. &lt;strong&gt;The public can still access the disaggregate data, so the privacy argument is moot.&lt;/strong&gt; All that the NZTA is achieving is frustration and a disempowering of the general public in matters of road safety information, while increasing their own internal costs.&lt;/p&gt;

&lt;p&gt;In the next few days I’ll be submitting some requests for information under the OIA to bring more light on the decisions that have led to this point.&lt;/p&gt;
</description>
        <pubDate>Sun, 08 May 2016 19:22:00 +1200</pubDate>
        <link>http://www.nearimprov.com//cas-aggregation/</link>
        <guid isPermaLink="true">http://www.nearimprov.com//cas-aggregation/</guid>
      </item>
    
      <item>
        <title>Crash Analysis System: The Narrative Arc</title>
        <description>&lt;p&gt;For several years, up until at least June 2015, the New Zealand Transport Agency (NZTA) published the data underlying their Crash Analysis System (CAS). This included information on every Police-attended road crash or accident in New Zealand, with attendant information on the environment it occurred in, and what was deemed to have contributed to the accident. While the method of publishing this data was primitive,&lt;label for=&quot;sn-id-1&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;sn-id-1&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;It consisted of one CSV file for each calendar year, with each record in the file heavily encoded. Decoding required automation and a lot of sifting through several PDFs, and a tool to get machine-readable tables from them. An example record is &lt;code class=&quot;highlighter-rouge&quot;&gt;&#39;Ashburton District&#39;,&#39;MOORE ST&#39;,&#39;100&#39;,&#39;N&#39;,&#39; &#39;,&#39;WILLIAM ST&#39;,&#39;201531749&#39;,&#39;07/02/2015&#39;,&#39;Sat&#39;,&#39;2335&#39;,&#39;EA&#39;,&#39;CN1V&#39;,&#39;103A 129A &#39;,&#39;M&#39;,&#39;R&#39;,&#39;D&#39;,&#39;DO&#39;,&#39;F &#39;,&#39; &#39;,&#39; &#39;,&#39;C&#39;,&#39;050&#39;,&#39;0&#39;,&#39;0&#39;,&#39;0&#39;,&#39;&#39;,&#39;&#39;,&#39;1499510&#39;,&#39;5137544&#39;,&lt;/code&gt; and yes that whitespace in &lt;code class=&quot;highlighter-rouge&quot;&gt;&#39;F &#39;&lt;/code&gt; is actually meaningful. &lt;/span&gt; it was sufficient for people with a little bit of time to spare (me) and an unhealthy obsession with transportation issues (me) to make use of it. While in many ways it was a good example of how not to do open data, at the very least it existed, so &lt;a href=&quot;http://www.statschat.org.nz/?s=foreign+drivers&quot;&gt;other&lt;/a&gt; &lt;a href=&quot;http://www.mixnmashentry.blogspot.co.nz/&quot;&gt;people&lt;/a&gt; could take it and run with it. All the NZTA had to do was sit back and watch, massage new data, and upload a new file every three months.&lt;/p&gt;

&lt;h1 id=&quot;rising-action&quot;&gt;Rising Action&lt;/h1&gt;

&lt;p&gt;When I found this dataset one afternoon in 2014, I set to work making a prototype &lt;a href=&quot;http://www.nearimprov.com/national-crash-statistics/&quot;&gt;map visualisation&lt;/a&gt;. My initial concern at the time was just trying to see the frequency of different type of accidents involving cyclists along my commute home between Wellington and Petone. I wanted to know this for my own curiousity and safety, but I also wanted to share it with members of the &lt;a href=&quot;https://www.facebook.com/groups/166036183455868/&quot;&gt;Cycle Aware Wellington Facebook group&lt;/a&gt;, because I thought it would be useful to them.&lt;/p&gt;

&lt;p&gt;The raw CAS data is useless by itself, so interested people in this group would not be able to use it. If I had to write some code to decode a portion of the CAS data for consumption by people, then I would have to be able to do it for every accident in the system. &lt;a href=&quot;https://github.com/alpha-beta-soup/national-crash-statistics&quot;&gt;So that’s what I did&lt;/a&gt;, very slowly, iteratively, while procrastinating from my university work, with the help of a friend.&lt;/p&gt;

&lt;p&gt;Here’s the first time I sent people to it:&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;img src=&quot;/./assets/cas-saga/nzcm-v0-fb.png&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;It was buggy as Hell but seemed well-received, and I was inspired to keep working on it.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;img src=&quot;/./assets/cas-saga/nzcm-v0-db-comments.png&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;Here’s how I first decoded the CAS records:&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;img src=&quot;/./assets/cas-saga/nzcm-v0.jpg&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;Here’s how it’s done &lt;a href=&quot;http://www.nearimprov.com/national-crash-statistics/&quot;&gt;now&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure&gt;&lt;figcaption&gt;Astute readers will notice that this is the decoded visual summary of the raw data pasted in the margin further up the page. Would you ever have worked that out?&lt;/figcaption&gt;&lt;img src=&quot;/./assets/cas-saga/asburton-example.png&quot; /&gt;&lt;/figure&gt;

&lt;p&gt;To get a sense of the utility of this kind of visualisation, note that the only other way to see this data decoded is to sign up for what I call the “NZTA Experience”. Apparently the NZTA has heard of the Internet, but they make you download an additional program in order to use it… and ask that you please forward all queries to your hand-dandy in-house IT team.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/cas-saga/actual-cas-wtf.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;The &lt;a href=&quot;./assets/cas-saga/cas9-video.wmv&quot;&gt;training&lt;/a&gt; &lt;a href=&quot;./assets/cas-saga/cas12-video.wmv&quot;&gt;videos&lt;/a&gt; are a little bit sad/funny. They give an insight into the &lt;em&gt;awesome UI&lt;/em&gt; I was missing out on by not signing a license agreement and using their system to view a text file.&lt;label for=&quot;sn-id-2&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;sn-id-2&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;Credit where it’s due: there’s a lot in that bloated interface that I wouldn’t even attempt to implement. I’m sure it’s useful for a number of use cases. It just would be great if it was possible to use it. &lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I took one look at this option before deciding it wasn’t for me. I don’t even know what a “Citrix Receiver 3.1” is, but apparently it’s a Windows thing… NZTA, if you require people to have licenses for proprietary software to access open data, the data is not open.&lt;/p&gt;

&lt;p&gt;I took the liberty of downloading the linked documents, for posterity. Here are links to them:&lt;/p&gt;

&lt;h3 id=&quot;cas-privacy-agreement-v1docxassetscas-sagacas-privacy-agreement-v1docx&quot;&gt;&lt;a href=&quot;./assets/cas-saga/CAS-Privacy-Agreement-v1.docx&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;CAS-Privacy-Agreement-v1.docx&lt;/code&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;An MS Word privacy agreement that must be signed to use the NZTA’s CAS viewer. (&lt;a href=&quot;./assets/cas-saga/CAS-Privacy-Agreement-v1.pdf&quot;&gt;PDF&lt;/a&gt;.) In particular, it stipulates that no-one can access or use CAS data unless they have been entitled to do so by the NZTA in writing. I figured that providing the data for download absolved me from this, and these statements were only to be found in relation to accessing the Citrix system. I was never told otherwise. There was no fee associated with using CAS.&lt;/p&gt;

&lt;p&gt;This agreement includes this following &lt;em&gt;Purpose of collection of infomation&lt;/em&gt; (emphasis added):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;All information collected for use in CAS is collected in order to obtain and analyse accurate data in respect of traffic crashes in New Zealand.  Analysis of the information allows &lt;strong&gt;the NZTA&lt;/strong&gt;, &lt;strong&gt;other government agencies&lt;/strong&gt;, and &lt;strong&gt;agencies engaged in activities that contribute to the furtherance of road safety in New Zealand&lt;/strong&gt; to make significant contributions to crash prevention and wider road safety in New Zealand.  This includes contributing to the achievement of the Government policy objectives recorded in New Zealand’s Road Safety Strategy 2010-2020, Safer Journeys.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;So it seems pretty clear that the CAS data is designed from the outset to exclude the wider public from being able to interpret the data.&lt;/p&gt;

&lt;p&gt;It is also abundantly clear that the NZTA is preoccupied with the privacy risks associated with this data:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;14.3&lt;/strong&gt;	In particular the customer must do everything reasonably within its power to prevent any access, use or disclosure of the information other than that which is expressly provided for in this agreement, and will not, or allow a user to, further disclose any information unless the information is in a form in which individuals cannot be identified.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I can see why my map may have ruffled some feathers. I just hope they can see how unreasonable their access to CAS-the-system is, given how useful and important CAS-the-data is.&lt;/p&gt;

&lt;p&gt;To my informal and naïve tastes, there’s a considerable amount of legalse in this document, so I’d really appreciate any interpretations of it (leave a comment).&lt;/p&gt;

&lt;p&gt;Finally, here’s a gem:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;13.1&lt;/strong&gt;	The NZTA will make all reasonable endeavours to provide a secure and reliable system allowing the customer and user to use CAS at all times other than between 5pm and midnight each Saturday, such time being set aside for CAS maintenance.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;guide-to-coded-crash-reportspdfassetscas-sagaguide-to-coded-crash-reportspdf&quot;&gt;&lt;a href=&quot;./assets/cas-saga/guide-to-coded-crash-reports.pdf&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;guide-to-coded-crash-reports.pdf&lt;/code&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;My program uses the information in this PDF to decode the raw CSV data to a more meaningful GeoJSON structure, which then gets rendered in your browser. Go to page 15 to see the breakdown of the several hundred possible contributions to a crash. One crash can have as many of these explanations as needed; most explanations are additionally assigned to one of the parties to the crash, keyed by the type of vehicle, even working around the case where there are multiple vehicles of the same type in a crash. That’s a pretty complex structure, and &lt;em&gt;kudos&lt;/em&gt; for the NZTA for managing to cram that into a CSV!&lt;/p&gt;

&lt;h3 id=&quot;casp24pdfassetscas-sagacasp24pdf&quot;&gt;&lt;a href=&quot;./assets/cas-saga/CASp24.pdf&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;CASp24.pdf&lt;/code&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;A report prepared by Beca on some cycling project that includes images showing the NZTA’s CAS interface as it stood.&lt;/p&gt;

&lt;h3 id=&quot;casp27pdfassetscas-sagacasp27pdf&quot;&gt;&lt;a href=&quot;./assets/cas-saga/CASp27.pdf&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;CASp27.pdf&lt;/code&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;A report prepared by OPUS on a cycling project in Wellington that includes an Appendix showing the use of CAS data, including an almost hieroglyphic map of the movements of parties involved in accidents in their case study area.&lt;label for=&quot;mf-id-1&quot; class=&quot;margin-toggle&quot;&gt;⊕&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;mf-id-1&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;marginnote&quot;&gt;&lt;img class=&quot;fullwidth&quot; src=&quot;/./assets/cas-saga/heiroglyphics.png&quot; /&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;h1 id=&quot;confrontation&quot;&gt;Confrontation&lt;/h1&gt;

&lt;p&gt;Then, in 2015, the data stopped being updated. The last update was for the first three months of 2015, which was published in June that year. The next three months’ of data was due in September, but never came. Then, the links to the old data—all 15.25 years of it—disappeared from the NZTA website in silence. Now, if you wanted to see the CAS data, you had no choice but to sign up for the NZTA Experience. Once there, you would not be able to tell people about any of the disaggregate information you have access to, per the terms of the agreement you have to sign.&lt;/p&gt;

&lt;p&gt;Does that make sense to anyone? Let’s run through what I make of the NZTA’s thought process.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;We are worried about the privacy implications of people looking at details of individual crashes.&lt;/li&gt;
  &lt;li&gt;To protect privacy while balancing the need for organisations to actually use this information, the NZTA Experience (&lt;em&gt;SecureCAS&lt;/em&gt;) exists to allow people access to CAS only after signing an agreement that stipulates that you can’t show other people disaggregate information.&lt;/li&gt;
  &lt;li&gt;Third party applications using the raw data that are not subject to the license agreement should be discouraged through the non-publication of the raw data, in order to protect privacy.&lt;/li&gt;
  &lt;li&gt;The data is still open; anyone can access the raw data, it just has to be through the NZTA Experience.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Right. So I (as a third-party developer) can’t make a web application that displays the details of individual accidents to the public, but any individual member of the public can sign up for &lt;em&gt;SecureCAS&lt;/em&gt;. &lt;strong&gt;If privacy is the motivating force for the decision to not publish the raw data, what difference does it make if the public uses my application, or SecureCAS?&lt;/strong&gt; Ultimately, if someone wants disaggregate information, they can get it. I just made it easier. I made it so people attending a meeting of the Hutt Cycle Network can pull out a laptop and zoom to an area being discussed, and start using facts instead of perception.&lt;label for=&quot;sn-id-3&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;sn-id-3&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;When I was a member of this group, I was really happy to see people using it, and finding it easy to access information they didn’t even know existed. I see the publication of the raw data as potentially addressing a power imbalance between the road controlling authorities, who have had knowledge of and access to SecureCAS for years, and Joe Public, who didn’t even know this data was collected. &lt;/span&gt;&lt;/p&gt;

&lt;p&gt;When I noticed that the data had not been updated, I sent the following email to the Statistical Analysis team at the NZTA asking for an explanation:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Richard&lt;/strong&gt;: I was looking to update my record of the CAS data, but the page I have used in the past no longer exists: &lt;a href=&quot;https://www.nzta.govt.nz/resources/crash-analysis-system-data/&quot;&gt;https://www.nzta.govt.nz/resources/crash-analysis-system-data/&lt;/a&gt;&lt;br /&gt;
I noticed a few weeks ago that although it was up, the available data only went as far as March this year. Is this data still available for download?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;NZTA&lt;/strong&gt;: Apologies for the delay in replying to your email. We are currently reviewing the CAS information we have available on our website to make sure it meets our privacy and security standards. As &lt;strong&gt;the new on line data will be summarised information&lt;/strong&gt; and I understand you work with geospatial co-ordinates, would you like to apply for CAS access? This will give you access to the same level of information as was previously on the web.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Richard&lt;/strong&gt;: Yes I suppose I would like to apply for access, provided that the access will not cost me as I’m only using it as a hobbyist.&lt;br /&gt;
However I’m using the CAS data to make a public web map (&lt;a href=&quot;http://www.nearimprov.com/national-crash-statistics/&quot;&gt;http://www.nearimprov.com/national-crash-statistics/&lt;/a&gt;) in collaboration with some others. &lt;strong&gt;Will this review mean that my application will not be able to present the disaggregate information to the public?&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Richard&lt;/strong&gt; (after a week without a response): Is there any information on this review available? I have some free time available over this summer I am planning to spend developing my mapping application, but I first need to know if the data will still be able to be made public via my application.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;NZTA&lt;/strong&gt;: Thanks for your email. There is no cost associated with access to CAS, but you will be required to sign a data agreement. &lt;strong&gt;Under this agreement you will only be able to make aggregated information (totals of 4 or more) available through your app. Would you like to proceed with getting CAS access?&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I got very confused at this point, by the definition of “access to CAS”. I didn’t want to touch &lt;em&gt;SecureCAS&lt;/em&gt; with a ten-foot barge pole. I just wanted the raw data to work with on my own. There was still no explanation as to why it had been removed. To date, there appears to be no information on the NZTA website about any review into CAS, including whether any users of CAS data were consulted.&lt;/p&gt;

&lt;p&gt;I had no plans to sign up to a restrictive license that would make my crash map next to useless for the applications I originally intended it for. &lt;strong&gt;If I have to aggregate accidents to a minimum of four… I… how do you even do that?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;No, seriously&lt;/em&gt;. Take four accidents at random. One caused by a drunk driver at one in the morning, who hit a pole and was injured severely. One a year earlier at a nearby pedestrian crossing where a driver failed to yield and injured a pedestrian. Another involving a driver reversing from their driveway and hitting a child riding their bike, who later died from their injuries. Another a nose-to-tail caused by a driver actually stopping at a stop sign when the following driver expected them to treat it like a give way sign, but with no one injured. &lt;strong&gt;How do you aggregate these?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You could perhaps say how many accidents there were, and how many people were injured or killed in this area. But you can’t even say which type of accident is most prevalent, because they’re all different and you’re not allowed to discuss them in isolation. What if the council is proposing to remove the pedestrian crossing because (they argue) it is dangerous? What use is the aggregate data now? If only you could drill down into the raw data and extract that one accident that occurred on a pedestrian crossing and see why it happened!&lt;/p&gt;

&lt;p&gt;What if fewer than four accidents even occurred in your suburb or town? Is it even possible to draw this on a map? Can the NZTA actually provide a concrete précis of what this aggregation is supposed to look like?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The requirement for aggregation of CAS data in third-party applications completely shuts down the utility of the CAS data, and is extremely difficult to comply with.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Continuing the email chain, after I essentially told them the above:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;NZTA&lt;/strong&gt;:  Thanks for your interest in safety data. We are in the process of making a new aggregated CAS data set freely available using the Government’s Open Data initiative. This is the data set that will be publically available from now on without the signing of an agreement. This is the data set you could use for your personal mapping tool.
&lt;br /&gt;
&lt;strong&gt;If someone wishes to obtain data in addition to that made available to the general public via the open data initiative, they will be required to sign a data agreement to place some conditions on how the data may be used, in order to ensure data is kept appropriately secure and to protect the privacy of those individuals represented in the data set. For example, you would be able to use the data for research purposes and publish the results in an aggregated form.&lt;/strong&gt;
&lt;br /&gt;
I understand, however, that you would like data variables over and above the data that we will be making available via the government open data initiative or that has been published in the past. The way in which we can make certain additional variables available to you is by providing you with CAS access so that you can extract the additional data yourself, however, you will be required to sign a data agreement which places certain conditions on how you may use the data.
&lt;br /&gt;
There is no cost associated with access to the CAS data base.
&lt;br /&gt;
Please let me know if you wish to discuss.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Here’s my take on the embigged section of that quote:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Third party applications cannot show disaggregate information because privacy. If someone wants to see the apparently private information, they sure can, they just have to use SecureCAS.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Frankly, this makes no sense whatsoever. All it achieves is putting up a barrier to people making use of the data. I replied to the email:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Richard&lt;/strong&gt;: Thank you so much for the clarification about accessing the CAS data.
&lt;br /&gt;
Is there any documentation about the review into CAS that I may read? My application is predicated on disaggregated data. I’d like to contest that there are valid privacy concerns with the use of the data as it currently stands, and also note that if aggregated, the data is not going to be useful for most of the applications I see for it.
&lt;br /&gt;
For example, if required to aggregate to at least four accidents (as previously stated), after I apply multiple filters (e.g. accidents involving pedestrians at a particular pedestrian crossing in Petone 2000-2015 — as I did recently for the Hutt Cycle Network), the number of relevant accidents falls below this number and my map is then no longer useful as an advocacy tool for commenting on highly-local road network changes (a proposed change to the location of the crossing). I can imagine hundreds of possible permutations of the data just like this. If I am only able to show aggregate information, the function of the map will be restricted to commenting on general trends only (e.g. there were x accidents on pedestrian crossings across all of Lower Hutt… but I can’t say where or why exactly). I believe this to be a considerable regression in the utility of the data.
&lt;br /&gt;
I disagree that there are major privacy concerns that justify changing the service in this way. To the extent that I may be wrong or overruled, I propose that there are better ways of addressing these concerns than requiring aggregation (for example, only specifying an approximate date, or randomising the location slightly, or suppressing the reporting of specific accident codes).
&lt;br /&gt;
Has there been consultation with the users of the data before these changes were proposed? Myself and others have put considerable volunteer time into my application and I would have made my comments earlier had I known there were going to be changes.
&lt;br /&gt;
I’m happy to discuss this issue further.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;At this point the manager of the Statistical Information team contacted me to arrange a time to discuss in person the issues I was raising. Ultimately this had to be a phone conference between the manager, myself, and James Burgess (Chair, Cycle Aware Wellington).&lt;/p&gt;

&lt;p&gt;I took the call from the rooftop carpark of JB Hi-Fi in central Hamilton, amidst construction noise. During the hour-long phone call James and I felt we were given a fair hearing of our concerns. In particular, we stressed that the requirement to aggregate information is difficult to comply with, and severely diminishes the utility of the data.&lt;/p&gt;

&lt;p&gt;I argued that the privacy concerns are unfounded, because the only way the CAS data is personally identifying is if you already hold additional information about an accident. I also pointed out that news articles already reveal more information than CAS does about serious accidents, but we assured them that my application would never try and link CAS data to any form of media. I conceded that the CAS data did not need to reveal the age of the youngest child involved in an accident,&lt;label for=&quot;sn-id-4&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;sn-id-4&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;If a child or children are involved in an accident, the age of the youngest child is reported in the raw CAS data. Age is not reported otherwise. Gender is never given. &lt;/span&gt; but otherwise CAS data should not be changed at all. We provided concrete use cases for disaggregate data in an easy-to-consume web map format, from the perspective of cycling advocacy. We were assured that our concerns would be taken on board.&lt;/p&gt;

&lt;p&gt;The level of aggregation they were considering was regional, which was worse than I had imagined. The proposed confidentiality agreement would mean only this same level of aggregation would be possible for dissemination.&lt;/p&gt;

&lt;p&gt;There would be a follow-up call in two weeks. It felt good.&lt;/p&gt;

&lt;h1 id=&quot;falling-action&quot;&gt;Falling Action&lt;/h1&gt;

&lt;!-- Lack of information about the decision; unsure how to progress and get decision reviewed --&gt;

&lt;p&gt;There was no follow-up call.&lt;/p&gt;

&lt;p&gt;The person behind the &lt;a href=&quot;https://twitter.com/IBCycleWay&quot;&gt;@IBCycleWay&lt;/a&gt; Twitter handle asked for access to disaggregate CAS data and recieved this response (emphasis added):&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;NZTA&lt;/strong&gt;: Information from our Crash Analysis System (CAS) is no longer available for download directly from this website. We have recently revised our privacy and confidentiality standards, and the crash information did not meet those new standards. &lt;strong&gt;In some cases, the data included information that, by deduction, meant the person involved could be identified&lt;/strong&gt;. The Privacy Act 1993 is about protecting personal information and it is our duty as an Agency to ensure that personal information is protected and confidentiality of output is maintained. That is why we are now required to aggregate or &lt;strong&gt;suppress values under four.&lt;/strong&gt;
&lt;br /&gt;
Over the coming weeks, we are working to make aggregated information available for download from this website. Would you like us to email you when this becomes available?
&lt;br /&gt;
You are also able to apply for free access to the data via CAS. Please contact &lt;a href=&quot;cas.administrator@nzta.govt.nz&quot;&gt;cas.administrator@nzta.govt.nz&lt;/a&gt; if you would like to apply for access to CAS.
&lt;br /&gt;
I hope this is of assistance.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I have no idea what “suppress values under four” means.&lt;/p&gt;

&lt;p&gt;Realising that they were not going to seriously consider my perspective despite all the pestering I’d already put in, I tried another email salvo:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Richard&lt;/strong&gt;: Is there any word on the CAS data review? It has now been over a year since disaggregate data on road crashes and accidents has been been made available to the public, which is affecting the ability of safety advocates to comment on road network changes from the local to the national scale. I have heard through Twitter that a decision has been made with respect to this data, but I have not heard anything official and I still cannot find any information on the NZTA website.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I think I’m pissing them off now, because the response didn’t even attempt to address me:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Thanks for your email.
&lt;br /&gt;
As previously discussed, people can apply for free access to CAS for the following purposes:
&lt;br /&gt;
1. Informing transport policy and regulations
&lt;br /&gt;
2. Designing and prioritising a range of network user behaviour and road safety initiatives
&lt;br /&gt;
3. Supporting funding applications for network and road safety improvements
&lt;br /&gt;
4. Monitoring and evaluating the effectiveness of road safety initiatives
&lt;br /&gt;
5. Providing information for research purposes connected with road network user behaviour, road safety and transport policy.
&lt;br /&gt;
Please do let us know if you would like to apply for access.
&lt;br /&gt;
We are currently working to provide as much aggregated data as possible on our website while maintaining our obligations under the Privacy Act. We will be making this information available over the coming weeks, and will also be providing information as to why the csv files are no longer available. Would you like me to send you a link to the aggregated information when it becomes available?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;That last bit of communication is now two weeks’ old. I thank all those who have reached out to me via &lt;a href=&quot;https://twitter.com/alphabeta_soup&quot;&gt;Twitter&lt;/a&gt;, email and other channels to offer advice and information about this situation; it has all been taken on board. I’m trying to use this blog post to get all the information and my thoughts into one place, before taking the next step.&lt;/p&gt;

&lt;h1 id=&quot;character-growth-and-resolution&quot;&gt;Character Growth and Resolution&lt;/h1&gt;

&lt;p&gt;There is yet to be a satisfactory resolution for this narrative arc. The aggregate data for download still isn’t ready so I can’t comment on it, and my hand still isn’t ready to agree to the terms of their license agreement. My Linux OS can’t even use Citrix. I think. I still don’t know what Citrix is.&lt;/p&gt;

&lt;p&gt;I do have some questions for the NZTA:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;How many privacy issues have actually been encountered to justify this change to operational data?&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Why is there no available information about this review?&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Can you provide a concrete demonstration of how your proposed aggregation of no fewer than four accidents is supposed to work?&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Are you open to alternative suggestions about how to protect the privacy of people who have had the misfortune to be involved in an accident, that do not involve aggregation?&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I have some plans my &lt;a href=&quot;http://www.nearimprov.com/national-crash-statistics/&quot;&gt;crash map&lt;/a&gt;, but they’re mostly shelved until I know that the raw CAS data will be available again:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Make and expose a public RESTful API to the decoded CAS data, so it’s super easy for even more client applications to proliferate.&lt;/li&gt;
  &lt;li&gt;Improve my web map interface, including the ability to search crash causes and filter on those, instead of being limited to the filters that I have baked in.&lt;/li&gt;
  &lt;li&gt;Improve my web map with some server-side code, probably the same API I’m willing to write, so that it can display more than 3 months of data without destroying your browser.&lt;/li&gt;
  &lt;li&gt;Add some cool smarts to the web map: e.g. draw an irregular shape on the map and get some summary charts reflecting the crashes inside the shape that meet your non-spatial criteria.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I also have one question for you, the reader. &lt;strong&gt;What can be done?&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;supplementary-links&quot;&gt;Supplementary links&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;A &lt;a href=&quot;http://groups.open.org.nz/groups/ninja-talk/messages/topic/4s6b4LltkXJeQaGEmg4fMi#post-4s6b4LltkXJeQaGEmg4fMi&quot;&gt;thread&lt;/a&gt; on the Open Data Ninjas about the issue.&lt;/li&gt;
  &lt;li&gt;My &lt;a href=&quot;https://github.com/alpha-beta-soup/national-crash-statistics/issues/53&quot;&gt;Github issue&lt;/a&gt; about signing the data agreement, which I do not want to do.&lt;/li&gt;
  &lt;li&gt;The NZTA’s &lt;a href=&quot;https://www.nzta.govt.nz/resources/crash-analysis-system/cas.html&quot;&gt;CAS FAQ&lt;/a&gt;, which as of writing seems unchanged, with the exception that the raw data download is missing. Here’s &lt;a href=&quot;https://www.nzta.govt.nz/resources/crash-analysis-system/&quot;&gt;another, similar link&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;The NZTA’s &lt;a href=&quot;http://www.nzta.govt.nz/resources/crash-analysis-reports/index.html&quot;&gt;pre-aggregated &lt;em&gt;crash analysis reports&lt;/em&gt;&lt;/a&gt; which summarise CAS data on a regional basis. They’re neat, but personally I want to know about very particular circumstances: I don’t want a summary report, I want data.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;a-note-on-the-snark&quot;&gt;A note on the snark&lt;/h2&gt;

&lt;p&gt;I do apologise for the level of snark you have just endured. I truly appreciate all the hard work that has gone in to CAS and will continue to go into it. In turn, I hope that those at the NZTA appreciate the frustration that I’ve felt after putting in effort into this application, only for the rug to have been pulled out from underneath it without much explanation. Ultimately we both have similar goals: public safety, and factual information.&lt;/p&gt;
</description>
        <pubDate>Thu, 28 Apr 2016 20:02:00 +1200</pubDate>
        <link>http://www.nearimprov.com//cas-saga/</link>
        <guid isPermaLink="true">http://www.nearimprov.com//cas-saga/</guid>
      </item>
    
      <item>
        <title>Geodata web services</title>
        <description>&lt;p&gt;Bill Dollins has a &lt;a href=&quot;http://blog.geomusings.com/2013/12/11/building-a-simple-geodata-service-with-node-and-amazon-rds/&quot;&gt;downright useful tutorial&lt;/a&gt; over on his blog for building a straightforward geodata service with Node, Express, PostgreSQL and Amazon RDS.&lt;/p&gt;

&lt;p&gt;I’m actually surprised at how few of these sorts of server applications actually exist, given that they’re reasonably straightforward to set up, and marvelous to use. A project I’ve been working on recently at work consists of a WebSocket server (using ws4py) that operates as an aggregator for real-time spatial data from a variety of sources (also implemented as WebSockets). Connecting to it is as simple as &lt;code class=&quot;highlighter-rouge&quot;&gt;wss://host:port/api-version/service&lt;/code&gt; and then valid GeoJSON gets pushed to the browser. I don’t think I can say much about the project, but I can say it has transformed how I see the delivery of spatial data over the Internet for time-critical applications. I’d love it if the NZTA got around to implementing something like this for its traffic alert APIs.&lt;/p&gt;

&lt;p&gt;I also have the beginnings of a QGIS plugin that connects to a specified WebSocket and will render arriving messages, provided they come as GeoJSON.&lt;/p&gt;
</description>
        <pubDate>Sat, 16 Jan 2016 21:04:51 +1300</pubDate>
        <link>http://www.nearimprov.com//geodata-service/</link>
        <guid isPermaLink="true">http://www.nearimprov.com//geodata-service/</guid>
      </item>
    
      <item>
        <title>3D spatial indexes in PostGIS&lt;br&gt;&lt;small&gt;And even 4D spatio-teporal indexes!&lt;/small&gt;</title>
        <description>&lt;p&gt;I have just watched Paul Ramsay’s (CartoDB) breakout presentation from &lt;em&gt;PGConf Silicon Valley 2015&lt;/em&gt;. I love watching these kinds of videos. They’re reasonably short (~40 minutes) so are good while you’re eating lunch or killing time. They also tend to have little nuggets of wisdom to solve “gotchas” that for some reason no one has ever told you about. This presentation in particular has lots of these for using PostGIS. One I did not know about was the ability to specify an n-dimensional index in PostGIS. The typical way to construct a two-dimensional GIST index in PostGIS is to do:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INDEX&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;However if you have XYZ or XYZT data and you want to issue queries that take advantage of these additional dimensions with a multidimensional index, you will need:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INDEX&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gist_geometry_ops_nd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The different operator, internally, means that the spatial functions use the &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;amp;&amp;amp;&amp;amp;&lt;/code&gt; operator, rather than the &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;amp;&amp;amp;&lt;/code&gt; operator.&lt;/p&gt;

&lt;p&gt;I have been thinking recently about trying to get my hands on some LiDAR data. Acquiring this data is apparently very difficult at the moment. But if you use PostGIS, you’re now well-equipped to deal with it… if you can get your hands on it :information_desk_person:&lt;/p&gt;

&lt;p&gt;In addition, PostGIS allows you to switch out the geometry library from the Geometry Engine Open Source (GEOS) to the SFCGAL (SF (?) Computational Geometry Algorithms Library). SFCGAL is not as broad as GEOS, so if you do make the switch, internally a lot of your functions will still use GEOS. However, as Paul Ramsay notes, SFCGAL has a bunch of additional functions that GEOS does not. These include some interesting 3D functions:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ST_3DIntersection&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ST_Tesselate&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ST_3DArea&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ST_Extrude&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ST_ForceLHR&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ST_Orientation&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ST_Minkowski&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ST_StraightSkeleton&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ST_ApproximateMedialAxis&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;SFCGAL will need to be compiled, and then activated within PostgreSQL:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EXTENSION&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;postgis_sfcgal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;postgis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;backend&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;sfcgal&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;There is also a dedicated PostgreSQL extension for storing point cloud data: &lt;a href=&quot;https://github.com/pgpointcloud/pointcloud&quot;&gt;https://github.com/pgpointcloud/pointcloud&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also in the video, there is a tricky philosophical question, with important geometric implications (never thought I’d say that): &lt;em&gt;What is the intersection of two disjoint polygons?&lt;/em&gt; The sound of a tree falling in the woods? The sound of one hand clapping? Close. It’s a polygon representing the presence of nothing: &lt;code class=&quot;highlighter-rouge&quot;&gt;POLYGON EMPTY&lt;/code&gt;. And empty geometry is not &lt;code class=&quot;highlighter-rouge&quot;&gt;NULL&lt;/code&gt;. It’s actually more like &lt;code class=&quot;highlighter-rouge&quot;&gt;0&lt;/code&gt; (something with no magnitude, but not exactly nothing).&lt;/p&gt;

&lt;p&gt;Another way to get &lt;code class=&quot;highlighter-rouge&quot;&gt;GEOMETRY EMPTY&lt;/code&gt; is to use a negative buffer value that is larger than the geometry that is being buffered.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;center&gt;&lt;iframe width=&quot;65%&quot; height=&quot;500&quot; src=&quot;http://www.youtube.com/embed/GSuZP89UdGs&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;&lt;/center&gt;

&lt;p&gt;What did you find useful from this presentation?&lt;/p&gt;

&lt;p&gt;Incidentally, if someone can tell me what the “SF” in SFCGAL stands for, I’d really appreciate it. It’s driving me nuts. (Spatial Functions?)&lt;/p&gt;
</description>
        <pubDate>Sat, 19 Dec 2015 14:37:19 +1300</pubDate>
        <link>http://www.nearimprov.com//nd-spatial-index-in-postgis/</link>
        <guid isPermaLink="true">http://www.nearimprov.com//nd-spatial-index-in-postgis/</guid>
      </item>
    
      <item>
        <title>Vector fields of population travel demand</title>
        <description>&lt;p&gt;I just finished reading an interesting paper by Xintao Liu and colleauges entitled &lt;em&gt;Time-geographic relationships between vector fields of activity patterns and transport systems&lt;/em&gt;, in the Journal of Transport Geography.&lt;label for=&quot;sn-id-ref&quot; class=&quot;margin-toggle sidenote-number&quot;&gt;&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;sn-id-ref&quot; class=&quot;margin-toggle&quot; /&gt;&lt;span class=&quot;sidenote&quot;&gt;Liu, Xintao, Wai Yeung Yan, and Joseph Y.J. Chow. &lt;a href=&quot;http://www.sciencedirect.com/science/article/pii/S0966692314002191&quot;&gt;‘Time-geographic relationships between vector fields of activity patterns and transport systems.’&lt;/a&gt; &lt;em&gt;Journal of Transport Geography&lt;/em&gt; 42 (2015): 22-33. &lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/liu.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;I don’t really have much to say about it, but I’ll post a link to it anyway so I don’t forget about it: I’ve briefly explored this technique in the past, and hope to revisit it in the future. It’s pretty damn hard.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/commutecontours.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;Do you know of any similar examples?&lt;/p&gt;
</description>
        <pubDate>Sun, 06 Dec 2015 18:16:00 +1300</pubDate>
        <link>http://www.nearimprov.com//population-demand-vector-field/</link>
        <guid isPermaLink="true">http://www.nearimprov.com//population-demand-vector-field/</guid>
      </item>
    
      <item>
        <title>Algorithms Group at Eindhoven University of Technology</title>
        <description>&lt;p&gt;I recently stumbled across &lt;a href=&quot;http://www.win.tue.nl/algo/&quot;&gt;the webpage&lt;/a&gt; for the (spatial/geometric/cartograhic) Algorithms Group at &lt;em&gt;Technische Universiteit Eindhoven&lt;/em&gt; (Eindhoven University of Technology). I highly recommend browsing through some of the manuscripts included on &lt;a href=&quot;http://www.win.tue.nl/~hermanh//doku.php?id=graduation_projects&quot;&gt;Herman Haverkort’s (and students’) projects page&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In particular, I found one entitled &lt;a href=&quot;http://www.win.tue.nl/~hermanh//stack/Haverkort-cues-about-travel-time.pdf&quot;&gt;&lt;em&gt;Embedding cues about travel time in schematic maps&lt;/em&gt;&lt;/a&gt;. This is an interesting paper on schematic public transport maps, where it is first established that although excellent at allowing users to avoid unnecessary transfers, schematic maps of public transport pay the price of preventing people from determining how long a particular trips are, in both absolute and relative terms.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/Haverkort1.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/Haverkort2.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/Haverkort3.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;Haverkort presents a range of ideas for getting the best of both worlds, leading to a portfolio of intriguing ideas about hybridised schematic maps with travel time. I’ve included three of them here, and really encourage you to read the full paper.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/Haverkort4.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/Haverkort5.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/Haverkort6.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;I think it’d be a brilliant challenge to employ some of these ideas for a local network. There are also some interesting papers on automated graph drawing on the TUE webpage; if you’re anything like me, while you can appreciate the necessity and beauty of a one-off piece of cartography, the true Holy Grail is in abstracting and automating the procedure, giving space for updating source information or changing the extent of your geographic focus with minimal to no additional work.&lt;/p&gt;

&lt;p&gt;There are also a bunch of &lt;a href=&quot;http://www.win.tue.nl/algo/graduated-phd-students.php&quot;&gt;PhD theses&lt;/a&gt; that might make some good holiday reading… for uh, weird people like me.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Do you have any other interesting theses or manuscripts to read over the summer? Having completed mine in March this year, I feel I’m in a good space to really appreciate the hard work of others in producing one, so I’m looking to read a few.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;All images © Herman Haverkort, 2014&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
</description>
        <pubDate>Sun, 29 Nov 2015 12:55:00 +1300</pubDate>
        <link>http://www.nearimprov.com//algorithms-group-tue/</link>
        <guid isPermaLink="true">http://www.nearimprov.com//algorithms-group-tue/</guid>
      </item>
    
      <item>
        <title>New Zealand Spatial Excellence Awards&lt;br&gt;&lt;small&gt;Reflections following a PostGIS presentation&lt;/small&gt;</title>
        <description>&lt;p&gt;I have just returned from the New Zealand Spatial Excellence Awards for 2015. I was awarded the Postgraduate Student of the Year Award. I’m very slightly tipsy. I also had a very interesting contrasting experience that I think people in the “spatial industry” in New Zealand might be interested in.&lt;/p&gt;

&lt;p&gt;I had quite a tight schedule today, waking up in Raglan, popping into work in the morning, getting to the National Library in Wellington by early afternoon, meeting friends afterwards, attending a PostgreSQL/PostGIS user group meeting at 6, and then skipping out to go to the final NZSEA awards and dinner.&lt;/p&gt;

&lt;p&gt;The PostgreSQL/PostGIS user meeting was great. I had no idea what to expect. Two geo-friends (they’re real friends, we just bond over maps, so therefore they need the geo- preffix, © ESRI) came with me to Catalyst IT on Willis St, Wellington. Inside there were a few couches, and Brent Wood hanging out in shorts and a t-shirt. Dressed up in dress shoes and a shirt (but no jacket and tie), I felt very over-dressed. Brent discussed PostgreSQL/PostGIS, the treatment of geometry primitives in databases, spatial indexes and limitations thereof, MapServer, WMS in QGIS, GEOS, Proj.4, GDAL, and the antimeridian and how PostGIS’s &lt;code class=&quot;highlighter-rouge&quot;&gt;geography&lt;/code&gt; type gets over many of the attendant problems of that irritating fecking line. Then, we had pizza and I had to skip off without much of a chance to talk to Brent.&lt;/p&gt;

&lt;p&gt;I literally ran off to Te Papa, where a nibbles and networking event was going down. People were wearing frocks and tuxedos, and even kilts. Dressed up in dress shoes and a shirt (but no jacket and tie), I felt very under-dressed. Not to mention sweaty from running in a merino jumper. People talked “spatial enablement” and lots of buzzwords. A Minister ministered. Mark Sainsbury officiated. Lights flashed. Entrées were served. Awards were dished out. There was engaging discussion in my immediate neighbourhood, although lots of the surrounding attendees seemed to just be in attendance at a $180 dinner to… do something that I never quite worked out.&lt;/p&gt;

&lt;p&gt;Apparently we were highlighting the spatial industry in New Zealand and how cool it is. It felt like a bunch of people patting themselves on the back.&lt;/p&gt;

&lt;p&gt;Maybe it’s the wine talking, but to be honest, if the “spatial industry” had just spent that money funding PostGIS or GeoServer or Neo4j feature requests… more would have been done for the “spatial industry”.&lt;/p&gt;

&lt;p&gt;Don’t get me wrong: the individuals and organisations represented tonight do amazing work. Special congratulations to Interpret Geospatial Solutions for their huge haul of awards, Dr Mairéad de Róiste for her enormously well-deserved award for her hard work establishing the Masters in GIS (of which I am a graduate, and she was my thesis supervisor), Hamish Kingsbury (undergraduate student of the year), and Kim Ollivier (celebrating 30 years of working with spatial information). I’m truly grateful for my award, and the event itself was lovely and well organised. I had a great time talking to interesting and very intelligent people. With delicious food (but not beer and pizza). They even paid for my flights, which had a lot of private benefit as I got to see my friends.&lt;/p&gt;

&lt;p&gt;I don’t even think I deserve my award at all after talking to my category competition: superb PhD candidates Judy Rodda from Otago University, and Anton Marais from Waikato University. Judy has been modelling the distribution of the endangered Hector’s dolphins off the south coast of the South Island. Anton made a cellular automaton model of residents’ location and re-location decisions across the Waikato region, extending ten years’ into the future. (It annoys me that I’ve forgotten the name of open source software he used for this.)&lt;/p&gt;

&lt;p&gt;I just think the “spatial industry” in NZ is more than a little… self-obsessed. I certainly noticed that tonight.&lt;/p&gt;

&lt;p&gt;I wish I wasn’t the &lt;em&gt;only&lt;/em&gt; person who attempted to squeeze in attendance at both the awards and a brilliant session on PostGIS. Without any finger pointing, I think the industry can do better, if indeed there is such a thing as a “spatial industry”. For the record, I don’t even think there is such a thing. We are in a hardware, software and data industry, and that’s just fine.&lt;/p&gt;
</description>
        <pubDate>Thu, 19 Nov 2015 03:00:00 +1300</pubDate>
        <link>http://www.nearimprov.com//nzsea/</link>
        <guid isPermaLink="true">http://www.nearimprov.com//nzsea/</guid>
      </item>
    
      <item>
        <title>GeoServer Quickstart with Docker</title>
        <description>&lt;center&gt;
&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/docker.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;

&lt;figure class=&quot;fullwidth&quot;&gt;&lt;img src=&quot;/./assets/geoserver.png&quot; /&gt;&lt;figcaption&gt;&lt;/figcaption&gt;&lt;/figure&gt;
&lt;/center&gt;

&lt;p&gt;I’ve been exploring &lt;a href=&quot;geoserver.org/&quot;&gt;GeoServer&lt;/a&gt; recently, while also doing the same with &lt;a href=&quot;https://www.docker.com/&quot;&gt;Docker&lt;/a&gt;. I figured I’d share a simple Dockerfile I wrote for getting started with GeoServer (Master) and some extensions, using Docker. I was pleasntly surprised how easy this is to do, after reading a few horrow stories online about getting off the ground with GeoServer. Obviously there’s a lot of additional configuration required before deploying GeoServer, but Docker does at least make it very easy to try something out by ensuring your on the same page as somebody else.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-dockerfile&quot; data-lang=&quot;dockerfile&quot;&gt;# Dockerfile
FROM debian:wheezy

# Update the sources list
RUN apt-get update
RUN apt-get upgrade -y

# Install basic applications
RUN apt-get install -y build-essential wget unzip

# Get the JRE/JDK installation
RUN apt-get install -y default-jre default-jdk
RUN apt-get install -y openjdk-7-jre openjdk-7-jdk
ENV JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64

# Get GeoServer
ENV GEOSERVER_HOME=/usr/share/geoserver/
RUN mkdir $GEOSERVER_HOME
RUN wget http://ares.boundlessgeo.com/geoserver/master/geoserver-master-latest-bin.zip
RUN cp geoserver-master-latest-bin.zip $GEOSERVER_HOME
RUN unzip $GEOSERVER_HOME/geoserver-master-latest-bin.zip -d $GEOSERVER_HOME
RUN rm $GEOSERVER_HOME/geoserver-master-latest-bin.zip
ENV GEOSERVER_VER=2.9

# A plugin
ENV A_PLUGIN=geoserver-$GEOSERVER_VER-SNAPSHOT-netcdf-plugin
RUN wget http://ares.boundlessgeo.com/geoserver/master/ext-latest/$A_PLUGIN.zip
RUN cp $A_PLUGIN.zip $GEOSERVER_HOME
RUN ls $GEOSERVER_HOME
RUN ls $GEOSERVER_HOME/geoserver-$GEOSERVER_VER-SNAPSHOT/
RUN unzip $GEOSERVER_HOME/$A_PLUGIN.zip \
-d $GEOSERVER_HOME/geoserver-$GEOSERVER_VER-SNAPSHOT/webapps/geoserver/WEB-INF/lib/
RUN rm $GEOSERVER_HOME/$A_PLUGIN.zip

ENV GEOSERVER_HOME=$GEOSERVER_HOME/geoserver-$GEOSERVER_VER-SNAPSHOT/
WORKDIR $GEOSERVER_HOME/bin&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Then to build and run the Docker container:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;docker build -t user/geoserver-master:test .
docker run -it --net&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;host&quot;&lt;/span&gt; user/geoserver-master:test
./startup.sh&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Now you have GeoServer running, so head to &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost:8080/geoserver&lt;/code&gt;, and login with the default user and password: &lt;code class=&quot;highlighter-rouge&quot;&gt;admin&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;geoserver&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;If you want to try out GeoServer with data on your machine, you can just mount your data volume to the Docker container and point GeoServer to it in the admin panel. For instance, I mount &lt;code class=&quot;highlighter-rouge&quot;&gt;/home/data/sampledata&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;$GEOSERVER_HOME/data_dir/sampledata&lt;/code&gt; with &lt;a href=&quot;https://docs.docker.com/compose/&quot;&gt;Docker Compose&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;There. Now play around with GeoServer. I expect a cheque for 5% of what you would have spent on ArcGIS Server.&lt;/p&gt;

&lt;h3 id=&quot;update&quot;&gt;Update&lt;/h3&gt;

&lt;p&gt;Docker hygeine is important, although I’m still figuring it out. I’ve made the image use Debian Wheezy as a lightweight alternative to the Ubuntu 15.04 image I had before. It was also broken because I hadn’t added the command to install &lt;code class=&quot;highlighter-rouge&quot;&gt;wget&lt;/code&gt;, among a litany of other problems. It usually pays to test things, sorry if you tried it out earlier!&lt;/p&gt;
</description>
        <pubDate>Sun, 01 Nov 2015 21:06:00 +1300</pubDate>
        <link>http://www.nearimprov.com//geoserver-quickstart-with-docker/</link>
        <guid isPermaLink="true">http://www.nearimprov.com//geoserver-quickstart-with-docker/</guid>
      </item>
    
  </channel>
</rss>
