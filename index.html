
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Near Improv</title>
  <meta name="author" content="Richard Law">

  
  <meta name="description" content="A headway, as used in transit planning and modelling, is typically defined as the time
between consecutive services. If you catch a bus that &ldquo; &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alpha-beta-soup.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Near Improv" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-51933616-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <!-- http://samwize.com/2012/09/24/octopress-table-stylesheet/ -->
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Near Improv</a></h1>
  
    <h2>Visualising transportation in New Zealand and beyond</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:alpha-beta-soup.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/17/what-is-a-headway/">What is a Headway?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-17T08:38:41+12:00" pubdate data-updated="true">Jun 17<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/06/17/what-is-a-headway/#disqus_thread"
             data-disqus-identifier="http://alpha-beta-soup.github.io/blog/2014/06/17/what-is-a-headway/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A headway, as used in transit planning and modelling, is typically defined as the time
between consecutive services. If you catch a bus that &ldquo;comes every half hour&rdquo;, then
the service you catch has a headway of 30 minutes.</p>

<p>This concept is deceptively simple, and this blog post will explain why. There are
several examples of transit analyses that I have seen that use an incorrect definition
of the headway.</p>

<p>Defining the headway accurately is very important when modelling travel using public
transport because it is used to determine how long we expect passengers will wait.
Taking the example of the bus that comes every thirty minutes: if passengers all turn up
to the stop without considering the schedule (that is, at random), we would expect the
average passenger to be waiting there for a period of time equal to half the headway:
15 minutes.</p>

<p>The Transit Capacity and Quality of Service Manual (<a href="http://onlinepubs.trb.org/onlinepubs/tcrp/tcrp100/part%203.pdf" title="TCQSM 2nd Edition, PDF">TCQSM</a>) has a pretty handy table on
different headway classes and what they mean for waiting passengers. I&rsquo;ve taken this from
the second edition of the TCQSM (rather than the 3rd), because I don&rsquo;t have access to the
3rd edition. I don&rsquo;t know if it has changed (a heads-up if it has would be great).</p>

<table>
<thead>
<tr>
<th align="center">Level of Service (LOS) </th>
<th align="center">  Avg. Headway (min)  </th>
<th align="center">  Vehicles/h  </th>
<th> Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">A </td>
<td align="center"> &lt;10 </td>
<td align="center"> >6 </td>
<td> Passengers do not need schedules</td>
</tr>
<tr>
<td align="center">B </td>
<td align="center"> 10-14 </td>
<td align="center"> 5-6 </td>
<td> Frequent service, passengers consult schedules</td>
</tr>
<tr>
<td align="center">C </td>
<td align="center"> 15-20 </td>
<td align="center"> 3-4 </td>
<td> Maximum desirable time to wait if bus/train missed</td>
</tr>
<tr>
<td align="center">D </td>
<td align="center"> 21-30 </td>
<td align="center"> 2 </td>
<td> Service unattractive to choice riders</td>
</tr>
<tr>
<td align="center">E </td>
<td align="center"> 31-60 </td>
<td align="center"> 1 </td>
<td> Service available during the hour</td>
</tr>
<tr>
<td align="center">F </td>
<td align="center"> >60 </td>
<td align="center"> &lt;1 </td>
<td> Service unattractive to all riders</td>
</tr>
</tbody>
</table>


<p>Stops with LOS A mean that passengers can just up and board their service with barely any waiting.
Stops with LOS F require that passengers take time to plan their arrival at the stop
and probably change their schedules before or after their trip: living their life around the
schedule.</p>

<p>The &ldquo;average headway&rdquo; in the table is the inverse of average frequency.</p>

<p>So far, so good. Headways are the time between vehicles, and are useful as indications
of how frequent a public transport service is, and therefore how long passengers wait.
Average waiting time is complicated by the fact that not all passengers arrive to their
stops at random, but I will not bother you with this for the moment, as this post
is concerned with defining the headway, not waiting time, even if they are related.</p>

<hr />

<h2>Problem 1: Grouped arrivals</h2>

<hr />

<p>If I told you that a particular bus route had a frequency of 3 vehicles per hour,
what would be headway on that route? Well, there&rsquo;s 60 minutes to an hour, and 3 services
in that period. So we have 60/3=20 minute headway.</p>

<p>However what if the schedule (or, you know, reality) had all three of these services arriving
at the same time, perhaps because it is a bus interchange where three routes coincide before
heading their separate ways, or because buses can get caught behind a late service (bunching).
In this case, despite having a frequency of 3 vehicles per hour
(LOS C), your headway could arguably be defined in two ways.</p>

<p>The first is to assume that three services all arriving at once just count as one
arrival. Your headway is then 60 minutes, and LOS E.</p>

<p>The second is to acknowledge that O.K., the schedule says that they arrive at the same
time, but it can&rsquo;t be <em>exactly</em> the same time. Let&rsquo;s say for argument&rsquo;s sake, last
Tuesday they arrived at 7:00 am, 7:01 am, and 7:02 am, and then again at 8 am.
Let&rsquo;s call this Arrival Pattern A.
Your headway as we have so far defined it is one minute for the first bus, one minute for the second,
and 58 minutes for the third. Your average headway in this period is (1+1+58)/3=20 minutes, LOS C.</p>

<p>So we&rsquo;re back at 20 minutes! But hold on, none these buses has a 20 minute headway when considered
as an individual arrival.</p>

<p>This is tricky. What does the TCQSM recommend (p. 3-29)?</p>

<blockquote><p>Some judgment must be applied to bus stops located near timed transfer centers.
There is a considerable difference in service from a passenger’s perspective between a
bus arriving every 10 minutes and three buses arriving in a row from a nearby
transfer center every 30 minutes, even though both scenarios result in six buses per
hour serving the stop. In general, buses on separate routes serving the same
destination that arrive at a stop within 3 minutes of each other should be counted as
one bus for the purposes of determining service frequency LOS.&#8221;</p></blockquote>

<p>As it so happens, the TCQSM therefore
suggests using the first approach, where buses that arrive within three minutes of each other
are considered as one bus. So the 7:00, 7:01 and 7:02 buses would collapse down to some time point
in the range 7:00-7:02. I&rsquo;m not sure what moment exactly should be used within this range.
It may sound picky to be wondering if the representative arrival is 7:00 or 7:02, but
when writing code to calculate these headways for you, you have to make rather precise
decisions. I&rsquo;d guess it&rsquo;d be the average of these values, so 7:01 am.</p>

<p>However, if the buses arrived at 7:00, 7:04, 7:08 and 8:00, we&rsquo;d be back to an average headway
of 20 minutes, and square one. We&rsquo;ll call this Arrival Pattern B.</p>

<h3>Median headway</h3>

<p>This issue is why, when aggregating headways (rather than determining the headways of
particular trips) over an interval of time, the median headway is sometimes used
instead of the average headway. With a median headway, the potential to calculate
a headway that is never exhibited in reality is reduced.</p>

<p>For the two examples given in this section, Arrival Pattern A has a median headway of 1 minute.
Arrival Pattern B has a median headway of 4 minutes.</p>

<p>Hmm. That&rsquo;s not quite right, either, is it? If you were to use this as your headway for
the purposes of determining the average waiting time of a randomly-arriving passenger,
they&rsquo;d be waiting for 0.5 minutes (AP A) or 2 minutes (AP B).</p>

<h3>Is it a problem?</h3>

<p>I got to this point in my thinking and after a bit of time spent smashing my head into
my desk, I asked myself whether it was really a problem if the average headway in Arrival Patterns
A and B can be 60 and 20 minutes, respectively. This seems like a very big difference in headway
(and hence waiting time) for such a small difference in vehicle arrivals.</p>

<p>However, if passengers are arriving uniformly at random over the hour 7:00-8:00,
then the average passenger <em>does</em> indeed wait for -20 minutes in Arrival Pattern B.
In Arrival Pattern A, three minutes, while arbitrary, does seem like a reasonable amount
of time to consider services to be functionally arriving at the same time, given acceptable
levels of variation in arrival time.</p>

<p>That&rsquo;s fine and dandy for little examples like AP A and B above. But what if you
have a major stop where buses typically arrive every minute for the entire hour?
What is the headway? We&rsquo;ll call this Arrival Pattern C. In this case, the frequency-derived measurement of headway
(60 arrivals in 60 minutes, so 1 minute headways) is spot-on.</p>

<p>But the TCQSM just told us that arrivals less than 3 minutes apart should be considered
equivalent to the arrival of only one vehicle. So the 7:00 and 7:01 arrivals are equivalent
to each other. And the 7:01 and the 7:02. And the 7:02 and the 7:03. In fact, taking the
TCQSM&rsquo;s advice to the letter (as code written to solve this problem would naïvely), the
whole pattern of arrivals would be reduced down to one single arrival and a headway of
60 minutes for the 7:00-8:00 period!</p>

<h3>What do you do?</h3>

<p>Thinking about these problems, the most defensible solution I have come up with is
to take the TCQSM&rsquo;s grouping advice, but modify it slightly so we don&rsquo;t avoid that
last incomprehensible travesty. I would <em>bin</em> all arrivals into groups of four minutes.
So for Arrival Pattern C (arrivals every minute for an hour), we&rsquo;d see single arrival
events at 7:00, 7:04, 7:08, 7:12, and so on. 60 arrivals would be reduced to 15,
each with four minute headways. The average and the median headways in this case would
then both be four minutes, with an average waiting time of two minutes.</p>

<p>For AP B (7:00, 7:04, 7:08, and 8:00), no modification of the arrivals is required, and
the average headway is 20 minutes.</p>

<p>For AP A (7:00, 7:01, 7:02, and 8:00), we would modify the arrival pattern to be 7:00 and 8:00, as
the three arrivals near the start of the hour are grouped into the same bin. If there was a
fourth service at 7:03, the pattern would be the same, as well as the average headway (60 minutes). When we
get an additional service at 7:04, our (grouped) arrival pattern becomes 7:00, 7:04, 8:00, and <strong>our average
headway becomes 30 minutes</strong> rather than 60. The median also changes from 60 to 30.</p>

<p>This last case may not seem ideal, but let&rsquo;s recap the possible alternatives.</p>

<ol>
<li>A literal interpretation of the TCQSM has us grouping all of the first five arrivals into
one, leading to only one headway of <strong>60 minutes</strong>.</li>
<li>Without grouping, we&rsquo;d have headways of 1, 1, 1, 1, and 56 minutes, for an average
of <strong>12 minutes</strong>, and a median of 1 minute. Notice that the average headway is the same
as that determined from the frequency per hour (5 arrivals in 60 minutes).</li>
</ol>


<p>Deciding which method to follow is tricky. I don&rsquo;t have a clear favourite; but if forced to pick,
I like the method that uses the bins. It acknowledges the TQCSM&rsquo;s recommendation that
arrivals close in time be considered functionally equivalent, and results in a headway
that falls between the other two estimates derived from alternative interpretations.</p>

<p>From the perspective of someone who has to calculate these values programmatically, it
adds a bit of overhead, particularly over the simple arrivals per hour calculation. However that
calculation does not account for the scheduled arrivals, and I would not recommend it, ever.</p>

<hr />

<h2>Intermission</h2>

<hr />

<p>I apologise that this is a long post; but it&rsquo;s not as simple a problem as it is made out to be.
Here&rsquo;s a cat. Have a bite to eat, flick over to Facebook briefly, but please keep reading, I&rsquo;d
really love to get a different perspective.</p>

<p><span class='caption-wrapper'><img class='caption' src='/images/intermission-kitty.jpg' width='' height='' title=''><span class='caption-text'></span></span></p>

<hr />

<h2>Problem 2: The destination matters</h2>

<hr />

<p>So you&rsquo;re back from your break and here&rsquo;s a surprise. I&rsquo;ve been a little dishonest in my
definition of what a headway is. Well, I&rsquo;ve said a half-truth. The headway <em>is</em> the time
between vehicle arrivals at a stop. However, all arrivals are not equivalent. What matters
is <strong>where they are going</strong>. Let&rsquo;s say we have a network with stops A-E serviced by three different
routes (distinguished by colour and pattern for the colourblind: red is solid, green is dotted, and blue is dashed).</p>

<p><img class="right" src="../images/network-headway-diagram.png"></p>

<p>If you&rsquo;re seeking to travel directly from A to D, you don&rsquo;t at all care that there
is a blue line between A and E. So even if a blue line service arrived at A every minute
of every day, it would do you know good to board it (we&rsquo;ll assume you can&rsquo;t walk between any of the stops).
That is, if travelling A-D, your headway is defined only as the headway of the green route.</p>

<p>Now if you&rsquo;re instead travelling A-C, you can choose between the red and the green routes.
Unless these services arrive at A at the same time, your headway (and hence waiting time)
is less than it would be if you were travelling A-D, even though you are waiting at the same stop.
This path A-B-C is a public transport <em>corridor</em> of overlapping routes.</p>

<p>Travelling A-E, you again benefit from the corridor effect, as your line is shared between A and E.
Note, however, that although these overlapping routes work together to reduce your headway,
you may not necessarily choose to board the first red or blue service that arrives. For instance,
if blue is an express route that travels A-E while red is a slower route that stops at A-B-C-E,
you may be aware that skipping that red bus that just turned up at A in favour of waiting just a little
bit longer for the next blue bus is better, because the blue bus will get you to E in better time.</p>

<p>Given this, what&rsquo;s the headway? If the headway is used as a proxy for waiting time, how
can it account for the presence of express routes that may give people an incentive to wait a little bit
longer for a faster route? Given that you don&rsquo;t <em>know</em> with certainty that the blue bus is
going to turn up quickly enough for your gamble to pay off, what is your expected waiting time?</p>

<p>Further, what about the possibility of taking a green bus to C and then waiting at C for a red
bus to take you all the way to E? Might sound weird given transfers are annoying, but it&rsquo;s
certainly an advantage to have this option if C is more comfortable or well-lit as a place
to wait than is A.</p>

<p>These are very tricky questions with very tricky answers. The key thing to keep in mind, however, is the mantra:
<em>*the destination matters</em>. To this end, the TCQSM does acknowledge that headways are defined
with respect to a particular destination. By no means has this been clearly stated, however.
To quote their fuller definition (p. 3-29):</p>

<blockquote><p>Service frequency LOS is determined &lt;by destination from a given transit stop, as
several routes may serve a given stop, but not all may serve a particular destination.</p></blockquote>

<p>Take home point: a stop served by more than one route with multiple possible destinations
doesn&rsquo;t have &ldquo;a&rdquo; headway. It has a headway for each possible destination from each route.</p>

<h3>How do you calculate headways when the destination matters?</h3>

<p>An issue here, from the perspective of someone who wants to calculate headways from a published
schedule (e.g. from your local GTFS) or from observation of real-time service arrivals,
is that as soon as we define headways not as one number for each stop, but as one
number for each possible board-egress stop pair, the dimensionality of the problem grows.</p>

<p>Given this blog is ostensibly about transit visualisation, I&rsquo;ll make a diagram for this.</p>

<p>This is the exact same sample network as we had before, but now shown in terms of the direct
stop edges that exist. If you&rsquo;re to find the headway of travel A-C, you simply need to look
at the two edges that progress uninterrupted from A to C, and ignore all others. This is convenient.</p>

<p><img class="center" src="../images/network-headway-diagram-logical.png"></p>

<p>The problem with this is that the number of edges we have in the network has grown.
Where before we had 7 edges all holding information in our database (route, time, mode, etc.), we
now have 11. This increase of three doesn&rsquo;t sound big, but the only reason it is small is because
I have drawn a very simple network. Despite being simple, this is still coming up against the limits
of what I can reasonably convey in an diagram, what with its overlapping lines.</p>

<p>If instead of 5 stops I had drawn 60 stops, the number of edges now represented would be approximately
half of the number of stops squared (see below equation). For instance, in a 60-stop route, the first stop now has 59 edges leaving from it.
The second would have 58, the third 57, and so on. Before we changed to this representation,
we had <strong>59</strong> edges. Now there&rsquo;s <strong>1770</strong>. Across an entire transport network of
thousands of stops and overlapping routes, where before we had thousands of edges, we now have thousands of millions and you&rsquo;re looking at moving
from a database less than one GB in size to one in the tens of GBs or more, depending on how
exactly you choose to structure and aggregate your data.</p>

<p><img src="http://www.sciweavers.org/tex2img.php?eq=%5Cfrac%7Bstops%5E%7B2%7D%7D%7B2%7D-%28stops-0.5%5Ctimes%20stops%29%7D&amp;bc=White&amp;fc=Black&amp;im=jpg&amp;fs=12&amp;ff=arev&amp;edit=0" alt="equation" /></p>

<p>This problem is tractable (although takes a bit of crafty SQL) for a schedule or small
database of real-time observations. If you want to calculate the average travel time, or headway
or some other parameter for each of the millions of edges in this reconfigured network representing several years,
you&rsquo;ve got your work cut out for you. Unfortunately, that&rsquo;s exactly where I find myself.</p>

<hr />

<h2>Problem 3: What is the headway of the last service?</h2>

<hr />

<p>Imagine you have a commuter service that is scheduled to arrive at your stop at 7:00 and then 7:30
in the morning. What is the headway? Well, for the 7:00 service, it&rsquo;s half an hour. That&rsquo;s fair.
But the 7:30 service? Assuming there&rsquo;s a 7:00 service tomorrow, your headway is 23 hours and 30 minutes,
right?</p>

<p>Plug that in to your script for calculating headways and you now have an average headway
of twelve hours. Enjoying your 6 hour wait, average passenger?</p>

<p>If using headways to get an average waiting time, one would presumably have a ceiling
on the waiting time. Especially when the headways are such that you&rsquo;d be mad or critically uninformed
not to check the schedule.</p>

<p>Why have I never seen this problem mentioned? I don&rsquo;t see it in the TCQSM. I don&rsquo;t see it
in any academic paper that has used &ldquo;headway&rdquo; as though it is something you can touch with your hands.</p>

<p>Given I&rsquo;m facing this issue, what do I do? I can&rsquo;t be the only who has thought about it.</p>

<hr />

<h2>Conclusion</h2>

<hr />

<p>If I had a nickel for every time I&rsquo;ve read a paper where someone
has constructed a computer model of a public transport network and simply said:</p>

<blockquote><p>Waiting time is calculated as half of the headway.</p></blockquote>

<p>I&rsquo;d have very many nickels. The headway <strong>of what</strong>? Have you considered overlapping routes?
Did you calculate the headway as a mean or a median? Over what time interval? What did you
do if one of the arrivals is the last one for the day?</p>

<p>Calculating a headway is deceptively simple. If you get into the business of calculating
them for whatever purpose, I implore you to clearly state exactly what you did to calculate them.
Talk about corner cases. Talk about how you wrote your program to calculate them efficiently
as pairs of stops.</p>

<p>Because I&rsquo;ll have your head if you tell me that you used &ldquo;the headway&rdquo; and leave it at that.</p>

<h3>Care to weigh in?</h3>

<p>Have you dealt with calculating headways from schedules or real-time observations of transit arrivals? What issues did you come across? How did you deal with them?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/13/travel-time-variation/">What does dropping little Johnny off at school mean for commuters?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-13T17:44:17+12:00" pubdate data-updated="true">Jun 13<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/06/13/travel-time-variation/#disqus_thread"
             data-disqus-identifier="http://alpha-beta-soup.github.io/blog/2014/06/13/travel-time-variation/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have recently been fortunate enough to gain access to the real-time information (RTI)
for buses and trains in the Wellington region. This is the information that gets displayed in the
box at your bus or train stop giving an estimate of how many minutes until your bus arrives.
This information isn&rsquo;t publicly available as a download or as an API, although
you can try your luck looking at <a href="http://m.metlink.org.nz/stop/5006" title="Change the number at the end of the URL for a different stop">the mobile version of the Metlink website</a>.
Building statistics from that is a different thing entirely. I tried to write a
program to scrape the information, but you have to look at each stop individually
and &lsquo;Due&rsquo;, &lsquo;2 mins&rsquo;, &lsquo;3 mins&rsquo;, etc. isn&rsquo;t actually very useful beyond catching your service.</p>

<p>So. Without further ado, here is something I whipped up today. It demonstrates not
only the travel time variation along a single bus route, but also how the mean travel
time changes according to different conditions. In particular, I added information
to the dates stored with the data to be able to distinguish trips made on &lsquo;ordinary&rsquo;
weekdays where people are going to work and school, school holiday weekdays, and weekends.</p>

<p><span class='caption-wrapper'><img class='caption' src='/images/airport91_ttcomparison.png' width='' height='' title='Travel time data from the Greater Wellington Regional Council. Open in new tab for larger.'><span class='caption-text'>Travel time data from the Greater Wellington Regional Council. Open in new tab for larger.</span></span></p>

<p>This data covers all of April 2014. This year, both primary and secondary school holidays
began on April 17, and lasted until May 5, so the data is split roughly evenly between weekdays
where little Johhny is being ferried to school, and days when he is not. Most of us know from
experience that traffic congestion is worse in the school term than in the school holidays.
But how much? Well, if we take <a href="http://www.metlink.org.nz/timetables/bus/091/inbound" title="Click to see the route">the Airport Flyer bus route</a> as a unit of analysis, school-related
congestion adds about 14 minutes of travel time across the length of the route. This mostly accrues between
Jackson St and Murphy St. For those of you playing at home, that&rsquo;s the longest stretch between stops at
approximately 15 kilometres, and takes in the busiest section of State Highway 2 and the
urban motorway. However, from experience as a rider on this route, a lot of this
additional travel time comes from Petone (Jackson St/Hutt Rd, attempting to get
onto SH2). Also from experience as a resident in Petone, <strong>school congestion is a total
time killer</strong>.</p>

<hr />

<h2>What varies?</h2>

<hr />

<p>Now, let&rsquo;s back up a bit, because I can hear a few voices at the back. What can cause
variation in travel time apart from school-related congestion? Here&rsquo;s a list:</p>

<ul>
<li>Passengers getting on and off</li>
<li>Road maintenance</li>
<li>Bus driver behaviour</li>
<li>Non-school related road congestion</li>
<li>Weather</li>
<li>Possibly some other things</li>
</ul>


<p>Now, it is possible to separate out these different effects, although I leave that
as an exercise for the reader. I picked only a single month to ensure I&rsquo;d be comparing
apples with apples to the greatest extent possible. Admittedly, April <strong>did</strong> see a bit of roadworks
between Petone and Wellington that would have affected this route. However, this work
was being performed just as intensely during the school term and the weekend as for the
rest of April&mdash;so there is no reason to attribute the difference to that.</p>

<p>School children don&rsquo;t typically board the Airport bus, not only because it goes to the
Airport, but because it carries a surcharge. Some amount of variation is perhaps due to buses
on this route getting stuck behind the buses on other routes which school children are
boarding in the school term, and are not boarding in the holidays.</p>

<p>It&rsquo;s been noted that New Zealand has seen a significant increase in the proportion
of children and teenagers who are driven (or drive themselves) to school. Often the
impact on obesity is noted, as well as the opportunity cost of missed early morning
exercise which could help boost attention spans.</p>

<p>However, I have not seen it mentioned how this effects our transport system beyond
a general acceptance that congestion is worse. Although
I have only shown you one chart, I have played around with displaying the same information
for a variety of routes. The typical result for buses is that the mean travel time is greater
during the school term than outside of it. In terms of the variation around this mean, every example
I have plotted has shown a much greater standard deviation of travel time.</p>

<p>What does that mean? It means buses are generally getting stuck in school traffic,
causing people to be <strong>later than they otherwise need to be</strong>, or making them leave home earlier than otherwise.
It means <strong>buses are more late more often</strong>; people have <strong>less certainty about their arrival time</strong>, and the <strong>schedule becomes
less and less useful as a tool to reduce the amount of time you spend waiting</strong>.</p>

<p>Notably, the effect is much more limited for rail services, which do not want to put up
with any of that school-gate SUV madness.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/13/global-isochrone-travel-time-from-london-1881/">Global Isochrone Travel Time from London (1881)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-13T10:33:38+12:00" pubdate data-updated="true">Jun 13<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/06/13/global-isochrone-travel-time-from-london-1881/#disqus_thread"
             data-disqus-identifier="http://alpha-beta-soup.github.io/blog/2014/06/13/global-isochrone-travel-time-from-london-1881/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here&rsquo;s an interesting historical map that turned up on <a href="http://www.reddit.com/r/MapPorn/comments/27yfn0/isochronic_passage_chart_for_travelers_global_map/" title="Link to Reddit thread">/r/MapPorn</a> today. Made by
Francis Galton for the Proceedings of the Royal Geographic Society in 1881, I find
it particularly interesting because it represents the state of international travel
only a decade or so after my Scottish and Irish ancestors travelled to New Zealand
(via way of Cape Town, where one of my great-great aunts was born <em>en route</em>).</p>

<p><span class='caption-wrapper'><img class='caption' src='/images/global-isochrone-travel-time-from-london-1881.jpg' width='' height='' title='**Isochronic passage chart for travellers**, showing the shortest number of days journey from London by the quickest through routes and using such further conveyances as are available without unreasonable cost. It is supposed that local preparations have been made and that other circumstances are favourable.'><span class='caption-text'><strong>Isochronic passage chart for travellers</strong>, showing the shortest number of days journey from London by the quickest through routes and using such further conveyances as are available without unreasonable cost. It is supposed that local preparations have been made and that other circumstances are favourable.</span></span></p>

<p>The work of cartographers past is often so impressive on their own merits (although
I suspect the chaff has been cut with time) yet when you also consider the technology
that they <em>didn&rsquo;t</em> have to make their maps&hellip; the mind boggles and you realise that all of use
currently practising the skill have it so easy. Really, if work of this calibre could be made then,
there are no excuses for bad maps now.</p>

<p>One particular technique I&rsquo;d like to draw attention to is the shape of the coastlines.
They&rsquo;re <em>really wobbly</em>. I suspect this is probably because nice little shapefiles didn&rsquo;t
exist for downloading&mdash;-but the effect that this has is to express that coastlines are
complex features even if that complexity isn&rsquo;t well known. Rather than generalise
coastlines to rather round shapes (which would be fine at this scale, really), they
have been deliberately given additional complexity: it&rsquo;s anti-generalisation.</p>

<p>As far as I am aware, this would be quite hard to achieve with modern software. You would have
to first add vertices to existing shapes at not-quite-regular intervals, and then shift
the vertices about to get that head-beach in-out effect.</p>

<p>I also really think the colour distinction between land and water with the same
category value is really nifty, and of course is crucial when the main form of
intercontinental travel is by sea (steam ship). It wouldn&rsquo;t really make sense for
travel <em>par avion</em>, or any other mode.</p>

<p>Finally:</p>

<blockquote><p>It is supposed that local preparations have been made and that other circumstances are favourable.</p></blockquote>

<p>I love this. These kind of assumptions have been made for over a hundred years in
transportation analysis and cartography. I wonder if it will ever be possible to completely
overcome them.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/12/montreal-transit/">One day in Montréal</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-12T17:58:10+12:00" pubdate data-updated="true">Jun 12<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/06/12/montreal-transit/#disqus_thread"
             data-disqus-identifier="http://alpha-beta-soup.github.io/blog/2014/06/12/montreal-transit/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This video of Montréal&rsquo;s transit system fell across my path today, made by Colin
Stewart and Ahmed El-Geneidy at McGill University&rsquo;s School of Urban Planning. I&rsquo;ve
been reading a bit of professor El-Geneidy&rsquo;s work recently for my own research, and
I&rsquo;ve recently been entertaining the idea of visiting Montréal for an extended period
of time once I print a thesis onto a reconstituted tree. Providence?</p>

<div class="embed-video-container"><iframe src="http://www.youtube.com/embed/1ztMm5xmk3M" allowfullscreen></iframe></div>


<p>The video shows 24 hours of transit, from 4:30 in the morning for the Société de
transport de Montréal (STM), drilling down to individual scheduled trips. It distinguishes
between the green, orange, yellow and blue metro lines as well as buses operating every ten minutes
(the purple points) and &ldquo;regular&rdquo; buses (white).</p>

<p>It is presented on quite a high-resolution basemap, with plenty of attendant information.</p>

<p>While it is an interesting look at the network operation, there are a handful of
problems I have with this video that anyone reading may like to think about if
they are to make their own animation.</p>

<p>Note: if you&rsquo;re content with just looking at the cool flashing lights (and it is cool!)
don&rsquo;t bother reading on. I&rsquo;m going to focus on the negatives and leave the positives
as self-evident. Oh, I&rsquo;m such an optimistic young fellow.</p>

<hr />

<h2>Critique</h2>

<hr />

<p>Firstly, the information given in the video margins is a little overbearing, and
isn&rsquo;t even what I would consider to be the most important information. We are not
told what day of the week is represented (weekday schedules are typically different
from Saturday and Sunday schedules), or where the data is from. Even in the video
description, we have no link to further information. It almost seems as though
it is a recruitment device for transit buffs to hit McGill&rsquo;s website. Which worked
for me, let it be known, but I&rsquo;d still like some more information on how this was
constructed&mdash;especially if it is made with open data.</p>

<p>The margin of the video could be improved if the unnecessary information was removed
entirely (and left to text descriptions or the embedding web page) or allowed to fade
out after the first 20 or so seconds. Ideally, only time would remain after this
introductory period.</p>

<p>The base map, although nice in isolation, is too distracting. The blue
&lsquo;pops&rsquo; when it is the least important piece of information on the map. The St. Lawrence
River can be used here to give context to the map, but even in this capacity the basemap
works against intuition by orienting the map away from north. As a foreigner, I am
only vaguely aware of the shape of Montréal, but I still would have recognised it
immediately if north was up as per convention. In short, the colours and orientation
of the basemap ensure the basemap fails at its primary goal of providing immediate
contextual recognition.</p>

<p>Both colour and size are used to distinguish the types of modes represented, which
is appropriate. For the metro lines, the yellow and orange are hard to distinguish
on moving objects that (seem?) to share a line, although the use of a track is good.
I don&rsquo;t know if the capacity of a vehicle on the metro is several orders of magnitude
greater than a bus, but it probably is, and the relative size of the metro to the buses
is appropriate. However I think the metro points are probably a little too big, as they
bleed into each other and obscure the bus routes.</p>

<p>I think the two types of bus should have points of the same size (unless one has
a greater per-vehicle capacity), and allow small traces for the vehicles to distinguish
the higher frequency in one, which should emerge naturally if they are indeed high-frequency.</p>

<p>It is also worth asking whether the format is appropriate. Is a video a useful format
for presenting this information? The people in the comments seem happy enough, with
only one or two pointing out that this shows an idealised system where nothing comes
early or late&hellip; or arrives with no seats left. Could an interactive data visualisation
show the same information with additional value? I think so; particularly in that
I&rsquo;d like to zoom into particular neighbourhoods. I do appreciate, however, that
the authors of the video probably did this in their free time, and a video has higher
bang for your buck.</p>

<p>The other in-your-face issue with video as a format is that you&rsquo;re stuck with the
frame rate the authors found most interesting&hellip; or bearable given the number of times
they must have seen this in preparing it. I&rsquo;d love to slow it down during the busiest
moments, but alas.</p>

<p>The music. No comment. Mute it. Yuck.</p>

<hr />

<h2>Summary</h2>

<hr />

<p>Overall, this is an effective and interesting visualisation, but one that needs
a tidy-up around the edges&mdash;literally and figuratively.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/06/17/what-is-a-headway/">What is a Headway?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/13/travel-time-variation/">What does dropping little Johnny off at school mean for commuters?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/13/global-isochrone-travel-time-from-london-1881/">Global Isochrone Travel Time from London (1881)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/12/montreal-transit/">One day in Montréal</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/alpha-beta-soup">@alpha-beta-soup</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'alpha-beta-soup',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/+RichardLawNZ?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Richard Law -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'nearimprov';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
